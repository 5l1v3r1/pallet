<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>Reference - Providers</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2010-06-17 Thu"/>
<meta name="author" content="Hugo Duncan"/>
<meta name="description" content="Pallet reference documentation for providers"/>
<meta name="keywords" content="pallet providers cloud api"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../doc.css" />
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="org-div-home-and-up" style="text-align:right;font-size:70%;white-space:nowrap;">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div>

<h1 class="title">Reference - Providers</h1>


<p>
Pallet uses <a href="http://jclouds.org">jclouds</a> to create, start and stop nodes.  In order to use the cloud,
you will need to specify your cloud credentials.  Each cloud has a slightly
different terminology for the username/key and password/secret.
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Cloud Provider Names </h2>
<div class="outline-text-2" id="text-1">


<p>
In order to sign in to your cloud API, you will need to tell pallet the name of
your provider.  The names pallet recognises can be displayed with the following
from the REPL:
</p>



<pre class="src src-clojure">(<span style="color: #0000ff;">require</span> 'pallet.compute)
(pallet.compute/supported-providers)
</pre>



<p>
From the command line, you can use the lein plugin to list providers:
</p>



<pre class="src src-sh">lein pallet providers
</pre>



</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Explicit credentials </h2>
<div class="outline-text-2" id="text-2">


<p>
You can log in to the cloud explicitly, using the provider name, and your
credentials.
</p>



<pre class="src src-clojure">(<span style="color: #0000ff;">require</span> 'pallet.compute)
(<span style="color: #4682b4;">def</span> <span style="color: #0000ff;">service</span>
  (pallet.compute/compute-service
   <span style="color: #f4a460;">"provider"</span> <span style="color: #0000ff;">:identity</span> <span style="color: #f4a460;">"username"</span> <span style="color: #0000ff;">:credential</span> <span style="color: #f4a460;">"password"</span>))
</pre>



<p>
Pallet uses <a href="http://jclouds.org">jclouds</a>' terminology, <code>identity</code> and <code>credential</code>, but your
cloud provider will probably use different terms for these.
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Credentials in config.clj </h2>
<div class="outline-text-2" id="text-3">


<p>
You can use the pallet configuration file <a href="/Users/duncan/.pallet/config.clj">~/.pallet/config.clj</a> to specify
credentials.
</p>



<pre class="src src-clojure">(defpallet
  <span style="color: #0000ff;">:providers</span>
    {<span style="color: #0000ff;">:aws</span> {<span style="color: #0000ff;">:provider</span> <span style="color: #f4a460;">"ec2"</span> <span style="color: #0000ff;">:identity</span> <span style="color: #f4a460;">"key"</span> <span style="color: #0000ff;">:credential</span> <span style="color: #f4a460;">"secret-key"</span>}
     <span style="color: #0000ff;">:rs</span>  {<span style="color: #0000ff;">:provider</span> <span style="color: #f4a460;">"cloudservers"</span> <span style="color: #0000ff;">:identity</span> <span style="color: #f4a460;">"username"</span> <span style="color: #0000ff;">:credential</span> <span style="color: #f4a460;">"key"</span>}})
</pre>



<p>
The provider key, <code>:aws</code> and <code>:rs</code> above, has to be unqiue, but you can have
multiple accounts for the same provider.
</p>
<p>
To create a compute service object from this file, that you can pass to <code>lift</code>
or <code>converge</code>, you use <code>pallet.compute/compute-service-from-config</code>. By default,
the first provider entry will be used, and you can specify an alternative
provider by passing the key to the function.
</p>



<pre class="src src-clojure">(pallet.compute/compute-service-from-config <span style="color: #f4a460;">"rs"</span>)
</pre>



<p>
The <a href="/Users/duncan/.pallet/config.clj">config.clj</a> file is read automatically by the <code>lein</code> and <code>cake</code> plugins, and
in <code>lein</code>, you can switch between providers using the `-P` command line option.
</p>



<pre class="src src-sh">lein pallet -P rs nodes
</pre>




</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Credentials in settings.xml </h2>
<div class="outline-text-2" id="text-4">


<p>
The maven settings.xml file is often used to hold user specific configuration for
maven.  You can add your cloud provider information to this file, which is
normally located at <a href="/Users/duncan/.m2/settings.xml">~/.m2/settings.xml</a>.
</p>



<pre class="src src-nxml"><span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">settings</span><span style="color: #00cd00;">&gt;</span>
  <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">profiles</span><span style="color: #00cd00;">&gt;</span>
    <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">profile</span><span style="color: #00cd00;">&gt;</span>
      <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">id</span><span style="color: #00cd00;">&gt;</span>terremark<span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">id</span><span style="color: #00cd00;">&gt;</span>
      <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">activation</span><span style="color: #00cd00;">&gt;</span>
        <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">activeByDefault</span><span style="color: #00cd00;">&gt;</span>true<span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">activeByDefault</span><span style="color: #00cd00;">&gt;</span>
      <span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">activation</span><span style="color: #00cd00;">&gt;</span>
      <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">properties</span><span style="color: #00cd00;">&gt;</span>
        <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">jclouds.compute.provider</span><span style="color: #00cd00;">&gt;</span>Your Cloud serivce name<span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">jclouds.compute.provider</span><span style="color: #00cd00;">&gt;</span>
        <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">jclouds.compute.identity</span><span style="color: #00cd00;">&gt;</span>Your Cloud API username or key<span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">jclouds.compute.identity</span><span style="color: #00cd00;">&gt;</span>
        <span style="color: #00cd00;">&lt;</span><span style="color: #5f9ea0;">jclouds.compute.credential</span><span style="color: #00cd00;">&gt;</span>Your Cloud API secret or password<span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">jclouds.compute.credential</span><span style="color: #00cd00;">&gt;</span>
      <span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">properties</span><span style="color: #00cd00;">&gt;</span>
    <span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">profile</span><span style="color: #00cd00;">&gt;</span>
  <span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">profiles</span><span style="color: #00cd00;">&gt;</span>
<span style="color: #00cd00;">&lt;</span><span style="color: #00cd00;">/</span><span style="color: #5f9ea0;">settings</span><span style="color: #00cd00;">&gt;</span>
</pre>



<p>
To create a compute service object from settings.xml, you use
<code>pallet.compute/compute-service-from-settings</code>. The default is determined by the
active profile. You can specify a different profile by passing the profile's id
to the function.
</p>



<pre class="src src-clojure">(<span style="color: #0000ff;">require</span> 'pallet.compute)
(<span style="color: #4682b4;">def</span> <span style="color: #0000ff;">service</span> (pallet.compute/compute-service-from-settings <span style="color: #f4a460;">"terremark"</span>))
</pre>




</div>
</div>
<div id="postamble">
<p class="author"> Author: Hugo Duncan
</p>
<p class="date"> Date: 2010-06-17 Thu</p>
<p class="creator">HTML generated by org-mode 6.36trans in emacs 24</p>
</div>
</div>
</body>
</html>
