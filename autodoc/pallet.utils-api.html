<html>
  <head>
    <title>pallet.utils API reference (pallet)</title>
    <link href="static/favicon.png" rel="icon" />
    <link href="static/favicon.png" rel="shortcut icon" />
    <link media="all" type="text/css" href="static/clojure.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/wiki.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/internal.css" rel="stylesheet" />
    <!-- TODO: are we using these (from clojure.org)? If so, add the files -->
    <script src="file/view/code_highlighter.js" type="text/javascript"></script>
    <script src="file/view/clojure.js" type="text/javascript"></script>
    <style>.menuWrapper{height: 36px;}</style>
    <!--[if lte IE 6]>
    <link rel="stylesheet" href="http://www.wikispaces.com/_/2009051601/s/internal_ie.css" type="text/css" />
    <![endif]-->
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a id="Logo" href="index.html"><img alt="Clojure" height="100" width="100" src="static/clojure-icon.gif" /></a>
	<h1><a title="page header title" id="page-header" href="index.html">pallet</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <a class="wiki_link" href="index.html">Overview</a><br />
    <a class="wiki_link" href="api-index.html">API Index</a><br />
    <a class="wiki_link" href="#">Namespaces:</a>
    <ul id="left-sidebar-list">
      <li><a href="pallet.action-api.html" class="wiki_link">pallet.action</a></li><li><a href="pallet.action-plan-api.html" class="wiki_link">pallet.action-plan</a></li><li><a href="pallet.argument-api.html" class="wiki_link">pallet.argument</a></li><li><a href="pallet.blobstore-api.html" class="wiki_link">pallet.blobstore</a></li><li><a href="pallet.command-line-api.html" class="wiki_link">pallet.command-line</a></li><li><a href="pallet.command-script-api.html" class="wiki_link">pallet.command-script</a></li><li><a href="pallet.compute-api.html" class="wiki_link">pallet.compute</a></li><li><a href="pallet.config-file.format-api.html" class="wiki_link">pallet.config-file.format</a></li><li><a href="pallet.configure-api.html" class="wiki_link">pallet.configure</a></li><li><a href="pallet.core-api.html" class="wiki_link">pallet.core</a></li><li><a href="pallet.crate-api.html" class="wiki_link">pallet.crate</a></li><li><a href="pallet.debug-api.html" class="wiki_link">pallet.debug</a></li><li><a href="pallet.enlive-api.html" class="wiki_link">pallet.enlive</a></li><li><a href="pallet.environment-api.html" class="wiki_link">pallet.environment</a></li><li><a href="pallet.execute-api.html" class="wiki_link">pallet.execute</a></li><li><a href="pallet.futures-api.html" class="wiki_link">pallet.futures</a></li><li><a href="pallet.heynote-api.html" class="wiki_link">pallet.heynote</a></li><li><a href="pallet.logging-api.html" class="wiki_link">pallet.logging</a></li><li><a href="pallet.main-api.html" class="wiki_link">pallet.main</a></li><li><a href="pallet.main-invoker-api.html" class="wiki_link">pallet.main-invoker</a></li><li><a href="pallet.maven-api.html" class="wiki_link">pallet.maven</a></li><li><a href="pallet.md5crypt-api.html" class="wiki_link">pallet.md5crypt</a></li><li><a href="pallet.parameter-api.html" class="wiki_link">pallet.parameter</a></li><li><a href="pallet.phase-api.html" class="wiki_link">pallet.phase</a></li><li><a href="pallet.repl-api.html" class="wiki_link">pallet.repl</a></li><li><a href="pallet.request-map-api.html" class="wiki_link">pallet.request-map</a></li><li><a href="pallet.resource-api.html" class="wiki_link">pallet.resource</a></li><li><a href="pallet.session-api.html" class="wiki_link">pallet.session</a></li><li><a href="pallet.shell-api.html" class="wiki_link">pallet.shell</a></li><li><a href="pallet.strint-api.html" class="wiki_link">pallet.strint</a></li><li><a href="pallet.target-api.html" class="wiki_link">pallet.target</a></li><li><a href="pallet.task.add-service-api.html" class="wiki_link">pallet.task.add-service</a></li><li><a href="pallet.task.containers-api.html" class="wiki_link">pallet.task.containers</a></li><li><a href="pallet.task.converge-api.html" class="wiki_link">pallet.task.converge</a></li><li><a href="pallet.task.converge-cluster-api.html" class="wiki_link">pallet.task.converge-cluster</a></li><li><a href="pallet.task.describe-node-api.html" class="wiki_link">pallet.task.describe-node</a></li><li><a href="pallet.task.destroy-cluster-api.html" class="wiki_link">pallet.task.destroy-cluster</a></li><li><a href="pallet.task.feedback-api.html" class="wiki_link">pallet.task.feedback</a></li><li><a href="pallet.task.help-api.html" class="wiki_link">pallet.task.help</a></li><li><a href="pallet.task.lift-api.html" class="wiki_link">pallet.task.lift</a></li><li><a href="pallet.task.new-project-api.html" class="wiki_link">pallet.task.new-project</a></li><li><a href="pallet.task.nodes-api.html" class="wiki_link">pallet.task.nodes</a></li><li><a href="pallet.task.providers-api.html" class="wiki_link">pallet.task.providers</a></li><li><a href="pallet.task.to-blob-api.html" class="wiki_link">pallet.task.to-blob</a></li><li><a href="pallet.task.version-api.html" class="wiki_link">pallet.task.version</a></li><li><a href="pallet.template-api.html" class="wiki_link">pallet.template</a></li><li><a href="pallet.utils-api.html" class="wiki_link">pallet.utils</a></li>
    </ul>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div id="content_view" class="wiki wikiPage">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div style="margin-left: 1em;" class="toc-section">
    <a href="#toc0">Overview</a>
    <div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/*admin-user*">*admin-user*</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/admin-user-from-config">admin-user-from-config</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/admin-user-from-config-var">admin-user-from-config-var</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/as-string">as-string</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/base64-md5">base64-md5</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/classpath">classpath</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/classpath-jarfiles">classpath-jarfiles</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/classpath-urls">classpath-urls</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/default-private-key-path">default-private-key-path</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/default-public-key-path">default-public-key-path</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/dissoc-if-empty">dissoc-if-empty</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/dissoc-keys">dissoc-keys</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/file-for-url">file-for-url</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/find-var-with-require">find-var-with-require</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/forward-to-script-lib">forward-to-script-lib</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/make-user">make-user</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/map-with-keys-as-symbols">map-with-keys-as-symbols</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/maybe-update-in">maybe-update-in</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/middleware">middleware</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/pipe">pipe</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/pprint-lines">pprint-lines</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/quoted">quoted</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/resource-properties">resource-properties</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/slurp-as-byte-array">slurp-as-byte-array</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/tmpdir">tmpdir</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/tmpfile">tmpfile</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/with-temp-file">with-temp-file</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#pallet.utils/with-temporary">with-temporary</a>
    </div>
    <br />
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="namespace-name">pallet.utils</span></h1>
by <span id="author">Unknown</span><br />
<br />Usage:
<pre>
(ns your-namespace
  (:require <span id="long-name">pallet.utils</span>))
</pre><pre>
</pre><h2>Overview</h2>
<pre id="namespace-docstr">Utilities used across pallet.</pre>
<br />
<h2>Public Variables and Functions</h2>
<div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/*admin-user*">*admin-user*</h2>
  <span id="var-type">var</span><br />
  <pre id="var-usage"></pre>
  <pre id="var-docstr">The admin user is used for running remote admin commands that require root
permissions.  The default admin user is taken from the pallet.admin.username
property.  If not specified then the user.name property is used.
The admin user can also be specified in config.clj when running tasks
from the command line.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/admin-user-from-config">admin-user-from-config</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (admin-user-from-config config)
</pre>
  <pre id="var-docstr">Set the admin user based on a config map</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/admin-user-from-config-var">admin-user-from-config-var</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (admin-user-from-config-var)
</pre>
  <pre id="var-docstr">Set the admin user based on pallet.config setup.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/as-string">as-string</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (as-string arg)
</pre>
  <pre id="var-docstr">Return the string value of the argument.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/base64-md5">base64-md5</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (base64-md5 unsafe-id)
</pre>
  <pre id="var-docstr">Computes the base64 encoding of the md5 of a string</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/classpath">classpath</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classpath)
</pre>
  <pre id="var-docstr">Return the classpath File's for the current clojure classloader.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/classpath-jarfiles">classpath-jarfiles</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classpath-jarfiles)
</pre>
  <pre id="var-docstr">Returns a sequence of JarFile objects for the JAR files on classpath.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/classpath-urls">classpath-urls</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (classpath-urls)
</pre>
  <pre id="var-docstr">Return the classpath URL's for the current clojure classloader.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/default-private-key-path">default-private-key-path</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (default-private-key-path)
</pre>
  <pre id="var-docstr">Return the default private key path.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/default-public-key-path">default-public-key-path</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (default-public-key-path)
</pre>
  <pre id="var-docstr">Return the default public key path</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/dissoc-if-empty">dissoc-if-empty</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (dissoc-if-empty m key)
</pre>
  <pre id="var-docstr">Like clojure.core/dissoc, except it only dissoc's if the value at the
keyword is nil.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/dissoc-keys">dissoc-keys</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (dissoc-keys m keys)
</pre>
  <pre id="var-docstr">Like clojure.core/dissoc, except it takes a vector of keys to remove</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/file-for-url">file-for-url</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (file-for-url url)
</pre>
  <pre id="var-docstr">Convert a URL to a File. </pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/find-var-with-require">find-var-with-require</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (find-var-with-require sym)
       (find-var-with-require ns sym)
</pre>
  <pre id="var-docstr">Find the var for the given namespace and symbol. If the namespace does
not exist, then it will be required.
    (find-var-with-require 'my.ns 'a-symbol)
    (find-var-with-require 'my.ns/a-symbol)</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/forward-to-script-lib">forward-to-script-lib</h2>
  <span id="var-type">macro</span><br />
  <pre id="var-usage">Usage: (forward-to-script-lib &amp; symbols)
</pre>
  <pre id="var-docstr">Forward a script to the new script lib</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/make-user">make-user</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (make-user username &amp; {:keys [public-key-path private-key-path passphrase password sudo-password no-sudo], :as options})
</pre>
  <pre id="var-docstr">Creates a User record with the given username and options. Generally used
in conjunction with *admin-user* and pallet.core/with-admin-user, or passed
to `lift` or `converge` as the named :user argument.

Options:
 - :public-key-path (defaults to ~/.ssh/id_rsa.pub)
 - :private-key-path (defaults to ~/.ssh/id_rsa)
 - :passphrase
 - :password
 - :sudo-password (defaults to :password)
 - :no-sudo</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/map-with-keys-as-symbols">map-with-keys-as-symbols</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (map-with-keys-as-symbols m)
</pre>
  <pre id="var-docstr">Produce a map that is the same as m, but with all keys are converted to
symbols.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/maybe-update-in">maybe-update-in</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (maybe-update-in m [&amp; ks] f &amp; args)
</pre>
  <pre id="var-docstr">'Updates' a value in a nested associative structure, where ks is a
sequence of keys and f is a function that will take the old value
and any supplied args and return the new value, and returns a new
nested structure.  If any levels do not exist, hash-maps will be
created only if the update function returns a non-nil value. If
the update function returns nil, the map is returned unmodified.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/middleware">middleware</h2>
  <span id="var-type">macro</span><br />
  <pre id="var-usage">Usage: (middleware &amp; forms)
</pre>
  <pre id="var-docstr">Build a middleware processing pipeline from the specified forms.
The result is a middleware.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/pipe">pipe</h2>
  <span id="var-type">macro</span><br />
  <pre id="var-usage">Usage: (pipe &amp; forms)
</pre>
  <pre id="var-docstr">Build a session processing pipeline from the specified forms.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/pprint-lines">pprint-lines</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (pprint-lines s)
</pre>
  <pre id="var-docstr">Pretty print a multiline string</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/quoted">quoted</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (quoted s)
</pre>
  <pre id="var-docstr">Return the string value of the argument in quotes.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/resource-properties">resource-properties</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (resource-properties path)
</pre>
  <pre id="var-docstr">Given a resource `path`, load it as a java properties file.
Returns nil if resource not found.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/slurp-as-byte-array">slurp-as-byte-array</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (slurp-as-byte-array file)
</pre>
  <pre id="var-docstr">Read the given file as a byte array.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/tmpdir">tmpdir</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (tmpdir)
</pre>
  <pre id="var-docstr">Create a temporary directory.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/tmpfile">tmpfile</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (tmpfile)
       (tmpfile dir)
</pre>
  <pre id="var-docstr">Create a temporary file</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/with-temp-file">with-temp-file</h2>
  <span id="var-type">macro</span><br />
  <pre id="var-usage">Usage: (with-temp-file [varname content] &amp; body)
</pre>
  <pre id="var-docstr">Create a block where `varname` is a temporary `File` containing `content`.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="pallet.utils/with-temporary">with-temporary</h2>
  <span id="var-type">macro</span><br />
  <pre id="var-usage">Usage: (with-temporary bindings &amp; body)
</pre>
  <pre id="var-docstr">A block scope allowing multiple bindings to expressions.  Each binding will
have the member function `delete` called on it.</pre>
  
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div style="text-align: center;" id="copyright">Copyright (c) 2010 Hugo Duncan</div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a title="Visit Tom Hickey's website." href="http://www.tomhickey.com">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>