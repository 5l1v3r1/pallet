<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>Pallet - Release Notes</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2011-06-16 23:59:20 EDT"/>
<meta name="author" content="Hugo Duncan"/>
<meta name="description" content="Release notes for pallet releases"/>
<meta name="keywords" content="pallet palletops contribute"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="doc.css" /><link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Molengo"/>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>
<div id="content">
<div id="org-div-home-and-up" style="text-align:right;font-size:70%;white-space:nowrap;">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div>

<h1 class="title">Pallet - Release Notes</h1>

<p>The latest release is 0.6.1.
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">0.6.1 </h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1_1" class="outline-3">
<h3 id="sec-1_1">Install </h3>
<div class="outline-text-3" id="text-1_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-1_2" class="outline-3">
<h3 id="sec-1_2">Fixes </h3>
<div class="outline-text-3" id="text-1_2">


<ul>
<li>
Identify script output with server address
In order to provide clear provenance of script output when executing with
parallel phases, we attach the server address

</li>
<li>
Use hard links for md5 temporary checks
The symbolic link ended up pointing to the wrong location

</li>
<li>
Add normalisation of downloaded md5 files
Normalise downloaded md5 files to include the filename to verify, as used
by ubuntu md5sum.

</li>
<li>
Fix parallel phase execution
Need to ensure all futures are generated before any deref.

</li>
<li>
Fix md5sum-verify to avoid leaving the caller in a different directory

</li>
<li>
Fix recursive setting of ownership in directory and remote-directory

</li>
<li>
Add ability to single quote script.lib/sed-file expressions

</li>
<li>
Fix package manager specific filesystem paths

</li>
<li>
Fix action.user/user :group option for ubuntu, etc

</li>
<li>
Fix :enable option for pallet.action.service/service

</li>
<li>
Ensure groups are set up before users in pallet.action.user

</li>
<li>
Fix lib/sed-file for string experession with no restriction
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">0.6.0 </h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2_1" class="outline-3">
<h3 id="sec-2_1">Install </h3>
<div class="outline-text-3" id="text-2_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-2_2" class="outline-3">
<h3 id="sec-2_2">Features </h3>
<div class="outline-text-3" id="text-2_2">


<p>
Update to jclouds 1.0.0.
</p>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">0.5.1 </h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3_1" class="outline-3">
<h3 id="sec-3_1">Install </h3>
<div class="outline-text-3" id="text-3_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-3_2" class="outline-3">
<h3 id="sec-3_2">Features </h3>
<div class="outline-text-3" id="text-3_2">

<ul>
<li>
Add core/destroy-cluster and destroy-cluster task

</li>
<li>
Add converge-cluster task

</li>
<li>
Update pallet.action.user/user to handle login group
:group can be passed a group name to set the login group.

<p>
:groups now accepts a sequence of group names.
</p>
<p>
usermod now specialised on rh derivatives.
</p>
</li>
<li>
Add pallet.script.lib/has-command? to check availablity of command on path
Uses hash, instead of checking with which.  This is a lighter weight,
builtin, so is more portable. Some which's apparently always return a
zero status too.

<p>
download-file and pallet.crate.network-service are updated to use this.
</p>
</li>
<li>
Add :node-set-selector option to pallet.core
Add the ability to partition the nodes for lifting, based on a function
passed as an option. Currently implemented partitioning functions are
core/all-node-set-selector and core/new-node-set-selector.

</li>
<li>
Change default environment merge to deep-merge
User defined keys are deep merged by default, to allow them to be built
from cluster and lift/converge environments.

</li>
<li>
Add core/converge-cluster and lift-cluster
Add's the ability to lift or converge one or more clusters.  Environment
specified on the cluster-spec is propogated to it's groups.

</li>
<li>
Automatically run the :settings phase on lift or converge
In order to allow easy access to configuration metadata, run the
:settings phase before each lift or converge. The settings phase is
intended to be non side-affecting.

</li>
<li>
Add core/cluster-spec and add roles to server-spec and group-spec
Allows specification of a cluster made up of heterogeneous groups.  Roles
allow the cluster to be queried for nodes providing specified roles,
using session/groups-with-role and session/nodes-with-role

</li>
<li>
Add overload for etc-init to /etc/rc.d on arch

</li>
<li>
Add support for pacman-db-upgrade in package/minimal-packages

</li>
<li>
Add base-distribution to compute and session
Enable uniform treatment of all derived distributions. E.g. fedora,
centos, rhel are all based on rh.

</li>
<li>
Add debian squeeze to live test images

</li>
<li>
Add pallet.test.session-type for vbox headless/gui selection
When debugging boot issues, it is useful to be able to see the console

</li>
<li>
Add action/environmnet for controlling environment variables
Adds an environment/system-environment that is used to write
/etc/environment on debian based distros, and /etc/profile.d/xx on redhat
based distros

</li>
<li>
Add ~/.pallet/services/* as a source of service configuration
In order to allow the distribution of service defintions, enable service
definition in files in ~/.pallet/services. Add an 'add-service' task that
can be used to create service definitions from the command line.

</li>
<li>
Add support for post beta-9c jclouds snapshot
HardwareImpl, ImageImpl and NodeMetadataImpl all gain an extra tags
argument in their constructors

</li>
<li>
Add remote-exec, and streaming of output for sh-script

</li>
<li>
Add ability to not use a pty for ssh on fedora
Fedora seems to drop a few characters at the start of an ssh shell
connection when run with a pty.

<p>
Add an option map to execute/remote-sudo-cmd arguments. Allow
specification of whether to use a pty or not.
</p>
</li>
<li>
Allow dependecies between action calls
In order to have fine grained control over execution order, allow the
specification of :always-before and :always-after on an action
definition, and the specification of :always-before and :always-after and
an :action-id on the action call (via the with-precedence macro).

</li>
<li>
Add a :rh image list to live-test
Provides a means for testing across redhat variants.

</li>
<li>
Add fedora support
Add script function specialisations for fedora, and add fedora 14 to live
tests

</li>
<li>
Allow specification of precedence on an action invocation
In order to override default precedence rules, allow specification of
precedence on an action call.

</li>
<li>
Add merging of :environment from cake/*project*
In order to provide an identical environment under a cake task and from a
cake repl or swank server, merge :environment from cake/*project* in
compute-service-from-config and compute-service-from-settings
</li>
</ul>


</div>

</div>

<div id="outline-container-3_3" class="outline-3">
<h3 id="sec-3_3">Fixes and Improvements </h3>
<div class="outline-text-3" id="text-3_3">

<ul>
<li>
Fix a race in shutting down vmfest nodes

</li>
<li>
Improved pallet.execute logging, and checking of blank server address

</li>
<li>
Include exception message when provider fails to load

</li>
<li>
Fix network-service to use ~lib/exit

</li>
<li>
Remove use of pty on arch bootstrap for vmfest

</li>
<li>
Add warning for failed require of compute provider

</li>
<li>
Fix package/minimal-packages for new stevedore script convention

</li>
<li>
Change package/add-rpm to be non-aggregated
Allow use of rpm-bin in more general situations. Execution sequence can
now be controlled via with-precedence.

</li>
<li>
Modify log message for os-family computed from template

</li>
<li>
Add default installonlypkgs list for yum
When specifying installonlypkgs, the defaults should be added back in
(these include the kernel packages).

</li>
<li>
Fix script.lib/user-home for os-x

</li>
<li>
Disable package repos before enabling package repos
In yum package commands, disable repos before enabling, to allow
disabling all repos, then explicitly enabling a list

</li>
<li>
Fix merge of group specific environment on converge of new nodes

</li>
<li>
Fix use of :tag in pallet.environment/session-with-environment

</li>
<li>
Remove deprecation warning in vmfest

</li>
<li>
Add backward compatability to vmfest for group-name as tag

</li>
<li>
Fix vmfest 64bit and os-family detection

</li>
<li>
Fix for fedora to use yum

</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">0.5.0 </h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4_1" class="outline-3">
<h3 id="sec-4_1">Install </h3>
<div class="outline-text-3" id="text-4_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-4_2" class="outline-3">
<h3 id="sec-4_2">Features </h3>
<div class="outline-text-3" id="text-4_2">


<ul>
<li>
Switch to release versions of pallet-common and stevedore

</li>
<li>
Factor out thread-expr, stevedore and pallet-common

</li>
<li>
Conj-ing identity onto the comprehension is unnecessary, as reduce simply
returns the original value (arg, in this case) if handed an empty list.

</li>
<li>
More efficient implementation of for-&gt;, without the need to call reverse on
the list comprehension.
we now reduce with an initial value of arg and the #(%2 %1) function
&ndash; (reduce #(%2 %1) arg function-sequence) ends up acting exactly like a
call to comp with a reversed sequence.

</li>
<li>
Update to pallet-pom 0.4.3

</li>
<li>
Seperate repository manipulation actions into separate namespaces

</li>
<li>
Update to jclouds beta-9c

</li>
<li>
Add pallet.stevedore/empty?
This expands to the -z test.

</li>
<li>
Fix log messages for apply-phase

</li>
<li>
Fix incorrect switch of phase to task

</li>
<li>
Add outputput of partial results from ssh command
In order to improve the feedback of commands running over ssh, log output
as it becomes available

</li>
<li>
Deprecate pallet.target
Replaced with pallet.compute/admin-group and pallet.session/admin-group

</li>
<li>
Make deprecation messages consistent, and add :deprecated metadata

</li>
<li>
Rename request to session. pallet.request-map becomes pallet.session.

</li>
<li>
Rename pallet.resource.* to pallet.action.*
Rename resource to action. Set up forwarding from the pallet.resource
names.

<p>
pallet.resource.network-service becomes the first core crate at
pallet.crate.network-service.
</p>
<p>
pallet.resoruce.format becomes the first core configuration file
formatter at pallet.config-file.format.
</p>
<p>
pallet.resource.resource-when is renamed pallet.action.conditional
</p>
</li>
<li>
Refactor script fns into pallet.script.lib and make script fns use unquote
In order to remove the possibility of accidentally using a script
function, they must now be invoked using unquote. The use of unquote is a
reminder that clojure namespace resolution is in effect:
(stevedore/script (~lib/rm file))

<p>
The script functions have been factored out of pallet.resource.* into
pallet.script.lib in order to improve the seperation of the target script
generation.
</p>
</li>
<li>
Add tests for pallet.phase, fix issues, update compatability

</li>
<li>
Add pallet.resource as a compatability namespace

</li>
<li>
Refactored execution of actions to allow partial override by middleware
Allow middleware to override executor functions for specific :action-type
and :location combinations

</li>
<li>
Change resource to action and simplify code
To make the code clear pallet.resource is refactored into pallet.action,
pallet.action-plan, and pallet.phase.

<p>
The action-plan can now handle nested scopes.
</p>
<p>
The action creation macros have been renamed, and new macros for defining
unnamed actions are introduced.
</p>
<ul>
<li>
resource/defresource     action/action
</li>
<li>
resource/defresource     action/def-bash-action
</li>
<li>
resource/defaggregated   action/def-aggregated-action
</li>
</ul>
</li>
</ul>


<p>
For testing, test-utils/build-resources is replaced by
build-actions/build-actions.
</p>
<ul>
<li>
Fix naming that should refer to group-set rather than node-set

</li>
<li>
Add :qos to node-spec to allow quality of service options
Allows the grouping of template options for quality of service related
options such as spot price or enabling monitoring

</li>
<li>
Add pallet.compute/service as the preferred compute service instantiation
function
Provides a single function to access the different compute service
instantiation functions in pallet.

</li>
<li>
Switch environment to use :groups, and deprecate :tags

</li>
<li>
Add blobstore mapping for changed jclouds provider names

</li>
<li>
Keep track of futures started by pallet
It is useful to be able to control the futures started by pallet for node
count adjustments and for executing phases, e.g. to cancel pending
operations, etc.

</li>
<li>
Fix node-spec mapping for converge with multiple targets

</li>
<li>
Use symbolic names for vmfest extradata tags

</li>
<li>
Remove request from pallet.compute.ComputeService interface

</li>
<li>
Change default to parallel lift and converge

</li>
<li>
Switch to pallet-pom 0.4.1 and enlive 1.0

</li>
<li>
Update to jclouds 1.0-beta-9b

</li>
<li>
Introduced group-spec and server-spec
Refactored to separate domain concepts for group-spec and server-spec.
Renamed group-node to server.

</li>
<li>
Refactored lift* and converge*
Ensure that all functions called in lift*, converge*, and lift-nodes
follow the request map state pattern.

</li>
<li>
Refactor pallet.core
Improve naming consistency and reduce complexity of processing the input
node-set.

<p>
To improve encapsulation of the request map when accessed in crates
pallet.request-map has been extended to cover a couple of missing
functions, and some template functions have been altered to take a
request map rather than a node-spec.
</p>
<p>
This changes the keys in the request map used to specify the current
target.
</p>
<p>
Added a top level node-spec function for creating node spec's (to replace
make-node eventually).
</p>
<p>
An effort has been made to preserve backward compatability.
</p>
</li>
<li>
Unified scriptfn optional args to be keyword argument pairs

</li>
<li>
namespaced lookup of first element of a form in a stevedore script expression

<p>
This makes script functions behave similarly to ordinary clojure functions
and methods.  The first element of a form now has to resolve to a script
function, unless it is a string or a keyword implemented by pallet.stevedore.
</p>
<p>
(file/rm ~path :force true)
("rm" -f ~path)
</p>
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">0.4.18 </h2>
<div class="outline-text-2" id="text-5">


</div>

<div id="outline-container-5_1" class="outline-3">
<h3 id="sec-5_1">Install </h3>
<div class="outline-text-3" id="text-5_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-5_2" class="outline-3">
<h3 id="sec-5_2">Changes </h3>
<div class="outline-text-3" id="text-5_2">


<ul>
<li>
Ensure :target-packager is removed after producing resources
The :target-packager key is not overwritten if it exists, so needs to be
removed after every node in order for it to be set correctly when using
nodes with mixed os's.
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6">0.4.17 </h2>
<div class="outline-text-2" id="text-6">


</div>

<div id="outline-container-6_1" class="outline-3">
<h3 id="sec-6_1">Install </h3>
<div class="outline-text-3" id="text-6_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-6_2" class="outline-3">
<h3 id="sec-6_2">Changes </h3>
<div class="outline-text-3" id="text-6_2">

<ul>
<li>
More efficient implementation of for-&gt;, without the need to call reverse on
the list comprehension.
we now reduce with an initial value of arg and the #(%2 %1) function
&ndash; (reduce #(%2 %1) arg function-sequence) ends up acting exactly like a
call to comp with a reversed sequence.

<p>
Conj-ing identity onto the comprehension is unnecessary, as reduce simply
returns the original value (arg, in this case) if handed an empty list.
</p>
</li>
<li>
Add a package-manager-option for installonlypkgs on yum
installonlypkgs allows a list of packages that should be installed,
rather than upgraded (i.e. old versions are not removed)

</li>
<li>
Add functions to access and manipulate the images list in live-test
In order to allow users of live-test to add their own image lists,
provide pallet.live-test/add-image-list./start-release.sh 0.4.15 0.4.16
For this to work, the images to be used can not be bound at compile time,
so the pallet.live-test/images function is added.
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7">0.4.16 </h2>
<div class="outline-text-2" id="text-7">


</div>

<div id="outline-container-7_1" class="outline-3">
<h3 id="sec-7_1">Install </h3>
<div class="outline-text-3" id="text-7_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-7_2" class="outline-3">
<h3 id="sec-7_2">Changes </h3>
<div class="outline-text-3" id="text-7_2">

<ul>
<li>
Improve robustness of classpath discovery in presence of corrupt jars
If a jar on the classpath can not be read for some reason, we should not
give up, but just ignore that jar file

</li>
<li>
Ensure all output is read when an ssh shell closes

</li>
<li>
Provide better control of ssh ouput reading
Move to clj-ssh 0.2.4, which provides a larger default piped stream
buffer (and allows override of the buffer size).

<p>
Allow override of ssh output buffer size with an atom
(pallet.execute/ssh-output-buffer-size).
</p>
<p>
Allow override of ssh output polling period with an atom
(pallet.execute/ssh-output-poll-period).
</p>
</li>
<li>
Fix a bug that would cause Pallet to not find compute service in
config.clj when invoked through lein or cake

</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8">0.4.15 </h2>
<div class="outline-text-2" id="text-8">


</div>

<div id="outline-container-8_1" class="outline-3">
<h3 id="sec-8_1">Known issues </h3>
<div class="outline-text-3" id="text-8_1">

<ul>
<li>
Pallet can not find compute service in config.clj when invoked through lein or cake
</li>
</ul>


</div>

</div>

<div id="outline-container-8_2" class="outline-3">
<h3 id="sec-8_2">Install </h3>
<div class="outline-text-3" id="text-8_2">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>

</div>

</div>

<div id="outline-container-8_3" class="outline-3">
<h3 id="sec-8_3">Changes </h3>
<div class="outline-text-3" id="text-8_3">

<ul>
<li>
Update jpackage functions to use jpackage-utils-compat-el5-0.0.1-1
Add a compatability package to allow jpackge to work with it's own
jpackage-utils

</li>
<li>
Add pallet.package/add-rpm to install rpm files

</li>
<li>
Add :disable option update-package-list for yum
Allow for specification of exactly which repos will be updated.

<p>
The log message now also includes the options passed to package-manager
</p>
</li>
<li>
Add pallet.thread-arg/arg-&gt; for exposing the threaded argument
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9">0.4.14 </h2>
<div class="outline-text-2" id="text-9">


</div>

<div id="outline-container-9_1" class="outline-3">
<h3 id="sec-9_1">Install </h3>
<div class="outline-text-3" id="text-9_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>

</div>

</div>

<div id="outline-container-9_2" class="outline-3">
<h3 id="sec-9_2">Changes </h3>
<div class="outline-text-3" id="text-9_2">

<ul>
<li>
Add logging of unexpected exceptions in pallet-task

</li>
<li>
Alter logging format for ssh output to prepend newline
The incremental ssh output was difficult to read without a leading
newline

</li>
<li>
Add output of partial results from ssh command
In order to improve the feedback of commands running over ssh, log output
as it becomes available

</li>
<li>
Change pre and after phase names to be namespaced
To prevent collisions between the pre and after phase names with user
defined phase names, make the pre and after phase names namespaced with
pallet.resource

</li>
<li>
Rerun phase function after the pre and main phases
In order for the parameters from running the pre phase to be available in
the main phase, call the phase function again after executing the
pre-phase. Similarly for the main-phase and the after-phase

</li>
<li>
Update to clj-ssh 0.2.3

</li>
<li>
add-jpackage sets the jpackage repos to disabled by default
Add the jpackage repo list to the :jpackage-repos target parameters. Add
package-manager-update-jpackage to update the jpackage repos.

</li>
<li>
Updated implementation of for-&gt;, with support for destructuring.
The existing implementation of for-&gt; supported the binding of a single
variable to a single sequence. The updated implementation here makes use
of clojure.core/for to build up a sequence of functions;
((apply comp functionseq) arg) is then used to thread the argument among
the sequences. Each item in the resulting sequence is dealt with in
order.

</li>
<li>
Update pallet.resource.filesystem/mount to check if a filesystem is mounted
before attempting to mount it again. Also update it to accept an :fs-type
arg to set the filesystem type. Updated and added unit tests.
</li>
</ul>


</div>

</div>

<div id="outline-container-9_3" class="outline-3">
<h3 id="sec-9_3">Fixes </h3>
<div class="outline-text-3" id="text-9_3">


<ul>
<li>
Ensure pallet.config/service is used if no service specified on command
line

</li>
<li>
Ensure :configure is called for lift if invoked with no phases

</li>
<li>
Fix pallet.stevedore unquote splicing of empty sequences

</li>
<li>
Update pallet.thread-expr/for-&gt; to handle multiple body forms and empty
sequences

</li>
<li>
Add resource for the pallet version via pallet.core/version

</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-10" class="outline-2">
<h2 id="sec-10">0.4.13 </h2>
<div class="outline-text-2" id="text-10">


</div>

<div id="outline-container-10_1" class="outline-3">
<h3 id="sec-10_1">Install </h3>
<div class="outline-text-3" id="text-10_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-10_2" class="outline-3">
<h3 id="sec-10_2">Fixes </h3>
<div class="outline-text-3" id="text-10_2">

<ul>
<li>
Fix issues with cross-node configuration
When using delayed arguments or the post phase, to access parameters set
in a phase, there were several issues that masked the parameters. This
also adds tests for these use cases.
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-11" class="outline-2">
<h2 id="sec-11">0.4.12 </h2>
<div class="outline-text-2" id="text-11">


</div>

<div id="outline-container-11_1" class="outline-3">
<h3 id="sec-11_1">Known issues </h3>
<div class="outline-text-3" id="text-11_1">

<ul>
<li>
has an issue with propogation of parameters between phases.
</li>
</ul>


</div>

</div>

<div id="outline-container-11_2" class="outline-3">
<h3 id="sec-11_2">Install </h3>
<div class="outline-text-3" id="text-11_2">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-11_3" class="outline-3">
<h3 id="sec-11_3">Fixes </h3>
<div class="outline-text-3" id="text-11_3">

<ul>
<li>
Build and execute phases one by one
Fix a regression that prevented execution time additions to parameters
from being propogated to the next phase. This re-enables use case such as
ssh-key/record-key

</li>
<li>
Add exclusion of log4j.xml from jar (was in pallet-pom)
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-12" class="outline-2">
<h2 id="sec-12">0.4.11 </h2>
<div class="outline-text-2" id="text-12">


</div>

<div id="outline-container-12_1" class="outline-3">
<h3 id="sec-12_1">Install </h3>
<div class="outline-text-3" id="text-12_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-12_2" class="outline-3">
<h3 id="sec-12_2">Fixes </h3>
<div class="outline-text-3" id="text-12_2">

<ul>
<li>
Pass any :environment key in project.clj to the converge and lif tasks
In order to allow environment definitions in project.clj, and to enable
environments to be supplied by the cake context feature, the :environment
key values from project.clj are passed to the converge and lift commands
invoked by the converge and lift tasks (used by the lein and cake
plugins)

</li>
<li>
Add logging of pallet version
To ease identification of pallet versions in the log files, add debug
level logging of the pallet version on every lift and converge

</li>
<li>
Fix loading of providers to work with custom classloaders
Custom classloaders as used by cake, tomcat, etc, would break the loading
of the pallet compute providers.

<p>
Fixes #57
</p>
</li>
<li>
Add an exclusion of clojure to the enlive dependency
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-13" class="outline-2">
<h2 id="sec-13">0.4.10 </h2>
<div class="outline-text-2" id="text-13">


</div>

<div id="outline-container-13_1" class="outline-3">
<h3 id="sec-13_1">Install </h3>
<div class="outline-text-3" id="text-13_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-13_2" class="outline-3">
<h3 id="sec-13_2">Fixes </h3>
<div class="outline-text-3" id="text-13_2">

<ul>
<li>
Switch from jclouds/node-tag (removed in beta 9), and fix use of
:environment at the service level
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-14" class="outline-2">
<h2 id="sec-14">0.4.9 </h2>
<div class="outline-text-2" id="text-14">


</div>

<div id="outline-container-14_1" class="outline-3">
<h3 id="sec-14_1">Install </h3>
<div class="outline-text-3" id="text-14_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-14_2" class="outline-3">
<h3 id="sec-14_2">Fixes </h3>
<div class="outline-text-3" id="text-14_2">


<ul>
<li>
Filter for running nodes in compute/run-nodes for jclouds
In order to work around an issue 501 in jclouds, the return value of
org.jclouds.compute/run-nodes is now filtered for running nodes.  This
should prevent the occasional hang, where pallet would try to ssh into a
terminated node.

</li>
<li>
Switch to pallet-pom 0.4.1 and enlive 1.0
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-15" class="outline-2">
<h2 id="sec-15">0.4.8 </h2>
<div class="outline-text-2" id="text-15">


</div>

<div id="outline-container-15_1" class="outline-3">
<h3 id="sec-15_1">Install </h3>
<div class="outline-text-3" id="text-15_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-15_2" class="outline-3">
<h3 id="sec-15_2">Fixes </h3>
<div class="outline-text-3" id="text-15_2">


<ul>
<li>
Use the node image spec to construct the virtualbox machine definition
In order to allow control of the vmfest hardware and network
configuration, use the image template to overide the vmfest defaults. At
present it uses
:min-cores, :min-ram and :bridged-network.

</li>
<li>
Add release scripts

</li>
<li>
Fix the lookup of symbols in the :algorithms key of the nvironment
When evaluating an environment, say from config.clj, then the values
under the
:arguments key should be resolved to vars.

</li>
<li>
map-to-arg-string: quote arguments
Handle arguments with spaces like:
(pallet.resource.user/user "nexus" :comment "Sonatype Nexus system user")
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-16" class="outline-2">
<h2 id="sec-16">0.4.7 </h2>
<div class="outline-text-2" id="text-16">



</div>

<div id="outline-container-16_1" class="outline-3">
<h3 id="sec-16_1">Install </h3>
<div class="outline-text-3" id="text-16_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-16_2" class="outline-3">
<h3 id="sec-16_2">Fixes </h3>
<div class="outline-text-3" id="text-16_2">


<ul>
<li>
Documentation fixes for provider dependencies and :services

</li>
<li>
Make core/parallel-adjust-node-counts public

</li>
<li>
Make compute/vmfest use the :sudo-password option for the user
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-17" class="outline-2">
<h2 id="sec-17">0.4.6 </h2>
<div class="outline-text-2" id="text-17">



</div>

<div id="outline-container-17_1" class="outline-3">
<h3 id="sec-17_1">Install </h3>
<div class="outline-text-3" id="text-17_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-17_2" class="outline-3">
<h3 id="sec-17_2">Enhancements </h3>
<div class="outline-text-3" id="text-17_2">


<ul>
<li>
Add a :proxy entry to the environment for specifying a proxy for use by
remote-file
When running in environments that have a proxy available, specifying the
:proxy key of the environment as a url string will allow remote-file to
use the proxy.

<p>
:environment {:proxy "<a href="http://192.168.2.37:3128">http://192.168.2.37:3128</a>"}
</p></li>
</ul>


</div>
</div>

</div>

<div id="outline-container-18" class="outline-2">
<h2 id="sec-18">0.4.5 </h2>
<div class="outline-text-2" id="text-18">



</div>

<div id="outline-container-18_1" class="outline-3">
<h3 id="sec-18_1">Install </h3>
<div class="outline-text-3" id="text-18_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-18_2" class="outline-3">
<h3 id="sec-18_2">Enhancements </h3>
<div class="outline-text-3" id="text-18_2">


<ul>
<li>
Add a parallel converge, and a lift that applies phases in series,
and nodes in parallel.

</li>
<li>
Make identical node creation parallel in vmfest

</li>
<li>
Use environment to select converge and lift algorithms
Allow selection of parallel or serial execution using the environment.
The keys used are:
<ul>
<li>
[:algorithms :lift-fn]
</li>
<li>
[:algorithms :converge-fn]
</li>
<li>
[:algorithms :vmfest :create-nodes-fn]
</li>
</ul>
</li>
</ul>


<p>
The choice of :converge-fn functions:
</p><ul>
<li>
pallet.core/serial-adjust-node-counts
</li>
<li>
pallet.core/parallel-adjust-node-counts
</li>
</ul>


<p>
The choice of :lift-fn functions:
</p><ul>
<li>
pallet.core/sequential-lift
</li>
<li>
pallet.core/parallel-lift
</li>
</ul>


<p>
The choice of :create-nodes functions:
</p><ul>
<li>
pallet.compute.vmfest/serial-create-nodes
</li>
<li>
pallet.core/parallel-create-nodes

</li>
<li>
Add parallel execution of live-tests
Parallel execution is off by default. It can be enabled with the
pallet.live-test.parallel system property.  Live tests need to
pallet.live-test/test-for to enable this.

</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-19" class="outline-2">
<h2 id="sec-19">0.4.4 </h2>
<div class="outline-text-2" id="text-19">



</div>

<div id="outline-container-19_1" class="outline-3">
<h3 id="sec-19_1">Install </h3>
<div class="outline-text-3" id="text-19_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-19_2" class="outline-3">
<h3 id="sec-19_2">Enhancements </h3>
<div class="outline-text-3" id="text-19_2">

<ul>
<li>
Add an environment concept
The environment concept allows passing of external data to pallet, and
allows project, service, or command line overrides of pallet algorithms
and domain data objects.

<p>
The :environment key is recognised by lift and converge, in the
config.clj file at the global and service scope. A project specific
environment maybe be specified in pallet.config/environment.
</p></li>
</ul>


</div>
</div>

</div>

<div id="outline-container-20" class="outline-2">
<h2 id="sec-20">0.4.3 </h2>
<div class="outline-text-2" id="text-20">



</div>

<div id="outline-container-20_1" class="outline-3">
<h3 id="sec-20_1">Install </h3>
<div class="outline-text-3" id="text-20_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-20_2" class="outline-3">
<h3 id="sec-20_2">Fixes </h3>
<div class="outline-text-3" id="text-20_2">


<ul>
<li>
Remove extra keys from request in converge and lift tasks

<p>
lein and cake plugins were triggering the new keyword argument checking in
lift and converge
</p></li>
</ul>


</div>
</div>

</div>

<div id="outline-container-21" class="outline-2">
<h2 id="sec-21">0.4.2 </h2>
<div class="outline-text-2" id="text-21">



</div>

<div id="outline-container-21_1" class="outline-3">
<h3 id="sec-21_1">Install </h3>
<div class="outline-text-3" id="text-21_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-21_2" class="outline-3">
<h3 id="sec-21_2">Enhancements </h3>
<div class="outline-text-3" id="text-21_2">


<ul>
<li>
Speeds up creating and destroying virtualbox vms using vmfest.

<p>
Replace use of manager/as-map in pallet/compute/vmfest.clj with faster
alternative
</p>
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-22" class="outline-2">
<h2 id="sec-22">0.4.1 </h2>
<div class="outline-text-2" id="text-22">



</div>

<div id="outline-container-22_1" class="outline-3">
<h3 id="sec-22_1">Install </h3>
<div class="outline-text-3" id="text-22_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-22_2" class="outline-3">
<h3 id="sec-22_2">Enhancements </h3>
<div class="outline-text-3" id="text-22_2">


<ul>
<li>
This targets vmfest 0.2.1, adding support for virtualbox 4.0.2.

</li>
<li>
Adds handling of inaccessible virtual box machines
</li>
</ul>


</div>

</div>

<div id="outline-container-22_3" class="outline-3">
<h3 id="sec-22_3">Fixes </h3>
<div class="outline-text-3" id="text-22_3">


<ul>
<li>
Fixes handling of the case where a new machine fails to get an IP address
assigned
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-23" class="outline-2">
<h2 id="sec-23">0.4.0 </h2>
<div class="outline-text-2" id="text-23">



</div>

<div id="outline-container-23_1" class="outline-3">
<h3 id="sec-23_1">Install </h3>
<div class="outline-text-3" id="text-23_1">


<p>
The release is on <a href="http://oss.sonatype.org/content/repositories/releases/org/cloudhoist/pallet">sonatype</a>.
</p>
</div>

</div>

<div id="outline-container-23_2" class="outline-3">
<h3 id="sec-23_2">General </h3>
<div class="outline-text-3" id="text-23_2">


<p>
The pallet crates have been moved into the pallet-crates project.
</p>
<p>
This release introduces the ~/.pallet/config.clj configuration file.
</p>
<p>
maven-settings is now an optional dependency. This means that to use
settings.xml to store pallet configuration, you need to add
org.apache.maven/maven-settings 2.0.10 to your project dependencies. This
dependency was causing conflicts with lein.
</p>
<p>
There is also preliminary support for virtualbox via vmfest.
</p>


</div>

</div>

<div id="outline-container-23_3" class="outline-3">
<h3 id="sec-23_3">Lein and cake </h3>
<div class="outline-text-3" id="text-23_3">

<ul>
<li>
Fix reporting of unexpected error stack traces in pallet.main

</li>
<li>
Fix pallet.main/report-unexpected-exception, and add test for it

</li>
</ul>


</div>

</div>

<div id="outline-container-23_4" class="outline-3">
<h3 id="sec-23_4">Fixes </h3>
<div class="outline-text-3" id="text-23_4">


<ul>
<li>
Fix bug in pallet.script/add-to-scripts
The add-to-scripts function was referencing <b>scripts</b>, which was
incorrect since it is called by an alter-var-root invoctation on
<b>scripts</b>.

<p>
Change pallet.scripts/*scripts* to pallet.script/scripts, and make it an atom
</p>
<p>
Added extra tests and logging around script template selection for
generation of the bootstrap script.
</p>
<p>
Added a condition/raise when jclouds returns OsFamily/UNRECOGNISED on the
image to be used for a new node.
</p>
</li>
<li>
Improve exception message in stevedore/emit-infix

</li>
<li>
Fix md5-verify script implementation on ubuntu
</li>
<li>
Use &ndash;status for md5sum-verify on debian

</li>
<li>
Add repositories to pom to make sure parent pom can be found

</li>
<li>
Fix option argument processing for add-epel

</li>
<li>
Ensure package-source is executed before either package-manager or package

</li>
<li>
fix pallet.template/path-components for windows

</li>
<li>
Add test for propogation of :parameters supplied to lift

</li>
<li>
Remove the -n option for sudo on debian

</li>
<li>
Fix execute/remote-sudo

</li>
<li>
Fix a bug that prevented converge from reducing an existing node count to a
smaller, non-zero number of nodes

</li>
<li>
Remove -n option in sudo-no-password for mac

</li>
<li>
Fix jpackage-utils install priority. Remove duplicate package requests

</li>
<li>
Remove superfluous spaces produced by stevedore/script

</li>
<li>
Ensure correct treatment in stevedore for single statement if blocks
containing newlines

</li>
<li>
Correct quoting of checked-commands failure message

</li>
<li>
Allow pallet-version to be nil, to solve issue when compiling before
resource generation

</li>
<li>
Fix pacmans purge test

</li>
<li>
purge-package (pacman): also remove all (possibly modified) config files

</li>
<li>
Fix forwaring of all provider options from config, and ensure that provider
specific jclouds endpoint option is used

</li>
<li>
Fix pallet.thread-expr/if-&gt; for case with no else expression

</li>
<li>
fix infinite recursion when pallet.main is invoked without command line
arguments

</li>
</ul>


</div>

</div>

<div id="outline-container-23_5" class="outline-3">
<h3 id="sec-23_5">Enhancements </h3>
<div class="outline-text-3" id="text-23_5">


<ul>
<li>
Add a timeout to vmfest/wait-for-ip

</li>
<li>
Make minimal-packages update coreutils and sudo on ubuntu
</li>
<li>
Fix pallet.resource.package/minimal-packages

</li>
<li>
Shortcut execution of empty phases

</li>
<li>
Add pallet.resource.network-service/wait-for-port-response
wait-for-port-response is a function to wait for a port to a return a
response matching a given regex when sent a specific message.

</li>
<li>
Add checking of argument keywords to lift and converge

</li>
<li>
Add add-debian-backports to pallet.resource.package and process :enable
options in adjust-packages for aptitude

</li>
<li>
Add :proxy option to pallet.resource.file/download-file

</li>
<li>
Add the ability to configure the package manager
Add :configure option to pallet.resource.package/package-manager. The
only option at the moment is :proxy, which accepts a url for the http
proxy that should be used by the package manager

</li>
<li>
Add :upgrade action to pallet.resource.package/package-manager
In order to upgrade all installed packages, the :upgrade action is now
accepted by pallet.resource.package/package-manager. This is implemented
via the upgrade-all-packages script function.

</li>
<li>
Added pallet.live-test for running tests with actual nodes

<p>
Add pallet.test.image-list to select images to use for testing
When running the live tests, it is useful to be able to specify which
images to use.  The pallet.test.image-list can be used to specify this.
The list of images is made available to the tests in
pallet.live-test/*images*.  The pallet.live-test/exclude-images and
pallet.live-test/filter-images can be used to special case tests, or
filter unsupported images.
</p>
</li>
<li>
Add pallet.resource.network-service with functions for waiting on the state
of network services

</li>
<li>
Add alias as a special form in stevedore
Use alias to define command aliases:
(script (alias ls (ls -l)))

</li>
<li>
Add pallet.debug with print-request and log-request.
Add initial helper functions for debugging. print-request and log-request
can be inserted into a crate to show the intermediate request map.

</li>
<li>
Add the form causing an invalid request map to condition message in
pallet.resource/phase.
In order to help debugging, when an invalid request map is detected in a
phase, a condition is raised and the form that returned the invalid map
will be included in the condition's message.

</li>
<li>
Add the :endpoint option to compute/compute-service-from-map.

</li>
<li>
List packages after install/remove.
Ensure feedback on the state of packages after each package operation.

</li>
<li>
Add simple validation of the the request map to resource/phase

</li>
<li>
Add :no-sudo to the image specification, increase standoff while waiting
for ip

</li>
<li>
Add an :add-scope action to pallet.resource.package/package-manager that
can be used with debian or ubuntu

</li>
<li>
Add compile and tests phase executions for clojure-maven-plugin

</li>
<li>
Add marginalia and autodoc output directory targets

</li>
<li>
Change jclouds service implementation to use a provider specifc default
extension list, which will try to use pallet's no-op ssh client for the
stub service

</li>
<li>
Change compute-service-from-map so that the :extensions and :node-list key
values are read using read-string only when the values are strings

</li>
<li>
Add an overload to find-var-with-require for a single namespace qualified
symbol argument

</li>
<li>
Update pallet.main/-main to factor out pallet-task.
pallet-task returns an integer suitable for System/exit, but never calls
System/exit.  This simplifies lein interactive and cake integration.

</li>
<li>
make package/add-rpmforge an aggregate resource :always-before
package-manager

</li>
<li>
Add pkg- prefixed path functions, for locations of files managed by the
package manager Package managers such as brew do not install files in the
base system locations

</li>
<li>
Add pallet.thread-expr/let-with-arg-&gt; to allow a let in the middle of a
threaded expression In pallet crates, it is often useful to access an
element of the request in the middle of a threaded expression, and
let-with-arg-&gt; provides access to the request, and allows you to make
lexical scoped assignments.

</li>
<li>
Add per package enabling/disabling of repositories (yum only) Package
operations are grouped by enabled/disabled repositories and are ordererd
by a priority

</li>
<li>
add pallet.execute/local-checked-script

</li>
<li>
Add pallet.core/version based on a maven filtered resource

</li>
<li>
Allow documentation string and metadata on pallet.script/defscript
definitions

</li>
<li>
Do not complain about pallet.script/*template* being unbound until trying
to use a defined script multimethod

</li>
<li>
Use (seq <b>template</b>) for appropriate logging output of script template

</li>
<li>
Make maven-settings an optional dependency This means that to use
settings.xml to store pallet configuration, you need to add
org.apache.maven/maven-settings 2.0.10 to your project dependencies. This
dependency was causing conflicts with lein.

</li>
<li>
Add the vmfest compute provider from the vmfest branch

</li>
<li>
Update remote-sudo to use the user :password if present, and to use
sudo-cmd-for to generate the sudo command prefix.

</li>
<li>
Improve robustness of stevedore statement generation

</li>
<li>
Add :services key for config.clj and deprecate :providers

</li>
<li>
Add pallet.resource.format/name-values for formatting name value pairs

</li>
<li>
Attempt to use wget if curl not available

</li>
<li>
stop ls complaining about no version files when limiting the number of
versions of a file

</li>
<li>
Add pallet.parameter/get-for-service

</li>
<li>
Add execute/local-script for running local shell script commands

</li>
<li>
Add stevedore/directory?

</li>
<li>
Add warn-on-undefined-phase to warn if requested phase is not defined on
any target tag. Fixes #43

</li>
<li>
Explicitly remove :blobstore from jclouds compute service options

</li>
<li>
Simplify nodes-in-tag to not rely on the target node

</li>
<li>
Make package/add-epel aggregated and force it before any package-manager
commands

</li>
<li>
Allow specification of node-list nodes as data vectors

</li>
<li>
Remove default usage of compute provider as blob provider.

</li>
<li>
Add :endpoint to config.clj, and pallet.endpoint to settings.xml

</li>
<li>
Updates for new repository location. Removal of superfluous config in pom
(supplied by pallet-pom).

</li>
<li>
Add configure-service overload for rhel based distros

</li>
<li>
Added the start of crate writing guidelines

</li>
<li>
add pallet.request-map/os-version

</li>
<li>
Add specialisation for sudo for centos 5.3, to remove the -n option

</li>
<li>
remove src/demo.clj - now in the pallet-examples basic project

</li>
<li>
Enable script specialisation on OS version. Add os-version to Node. Add
:os-version to image. Add a combined os-family and os-version to
script-template.

</li>
<li>
refactor script template generation to resource/script-template

</li>
<li>
Add jclouds-snapshot profile.

</li>
<li>
Add assert for non-nil request in pallet.resource/invoke-resource

</li>
<li>
Propogate config map to request in tasks

</li>
<li>
add explicit maven-jar-plugin version

</li>
<li>
change lift and converge to take keyword arguments

</li>
<li>
Updated to use template as a map, and for new Hardware in jclouds nodes

</li>
<li>
Change maven settings keys to match jclouds

</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-24" class="outline-2">
<h2 id="sec-24">0.3.0 </h2>
<div class="outline-text-2" id="text-24">



</div>

<div id="outline-container-24_1" class="outline-3">
<h3 id="sec-24_1">Install </h3>
<div class="outline-text-3" id="text-24_1">


<p>
The release is on <a href="http://clojars.org/org.cloudhoist/pallet">clojars</a>.
</p>
</div>

</div>

<div id="outline-container-24_2" class="outline-3">
<h3 id="sec-24_2">Known Issues </h3>
<div class="outline-text-3" id="text-24_2">


<p>
pallet.thread-expr/if-&gt; incorrectly returns nil if there is no else expression.
</p>
<p>
pallet.main/-main goes into an infinite recursion if called without arguments.
</p>
</div>

</div>

<div id="outline-container-24_3" class="outline-3">
<h3 id="sec-24_3">General </h3>
<div class="outline-text-3" id="text-24_3">


<p>
Now using <a href="http://jclouds.org/">jclouds</a> beta 8.
</p>
<p>
There is now a node-list provider. Useful when working with a fixed set of pre-existing
nodes.
</p>
<p>
The provider credentials can now be configured in ~/.pallet/config.clj, or
by defining pallet.config/service or by setting the java system property
pallet.config.service to the qualified name of a clojure var.
</p>
<p>
The admin-user can now be configured in config.clj or project.clj, or by defining
pallet.config/admin-user.
</p>
<p>
<a href="https://github.com/davidsantiago/cake-pallet">Cake plugin for pallet</a> from David Santiago.
</p>
<p>
The project.clj file has been removed to prevent mismatch with pom.xml
</p>
<p>
In general, support for RHEL based distros (centos, amzn-linux) should now be
much better.
</p>
</div>

</div>

<div id="outline-container-24_4" class="outline-3">
<h3 id="sec-24_4">Lein and Cake tasks </h3>
<div class="outline-text-3" id="text-24_4">


<p>
The pallet-lein plugin for lein is now released to version 0.2.0.  It includes
passing of project.clj to the tasks
</p>
<p>
The command line options have changed to use the same terminology as elsewhere;
povider, identity and credential. Added blobstore-provider, blobstore-identity
and blobstore-credential options.
</p>
<p>
The `-P provider` option can be used to select the provider credentials to be used
from settings.xml or config.clj.
</p>
<p>
The task interface has changed, and now takes a first argument which is a request
map, containing :compute, :blobstore and :user keys, which are set by
pallet.main-invoker.
</p>

<p>
Added blobstore credentials.
</p>
<p>
Added containers task, to list blobstore (eg S3, CloudFiles) containers.
</p>
<p>
Added tomcat task to do simple tomcat deploy without any configuration.
</p>
<p>
Added to-blob task to enable upload of files to a blobstore.
</p>

</div>

</div>

<div id="outline-container-24_5" class="outline-3">
<h3 id="sec-24_5">New Crates </h3>
<div class="outline-text-3" id="text-24_5">


<p>
squeak, etc-hosts, postgresql (thanks David Santiago)
</p>
</div>

</div>

<div id="outline-container-24_6" class="outline-3">
<h3 id="sec-24_6">Enhancements </h3>
<div class="outline-text-3" id="text-24_6">


<p>
pallet.compute
Added compute/private-ip, compute/hostname
Abstracted jclouds usage to a protocol for improved testing
</p>
<p>
pallet.core
ensure :target-packager is set on bootstrap
</p>
<p>
pallet.resource
added :always-before metadata to allow resource dependencies.
</p>
<p>
pallet.resource.package
packages now installed in single command.
</p>
<p>
pallet.resource.remote-file
An :unpack :unzip option added
</p>
<p>
pallet.resource.file
defines make-temp-file script function.
</p>
<p>
pallet.stevedore
now does unquote splicing.
</p>
<p>
pallet.thread-expr
new apply-map-&gt;
</p>
<p>
pallet.crate.etc-default
a path can now be specified, allowing use elsewhere in the filesystem
</p>
</div>

</div>

<div id="outline-container-24_7" class="outline-3">
<h3 id="sec-24_7">Fixes </h3>
<div class="outline-text-3" id="text-24_7">


<p>
pallet.resource.file
sed will regenerate the file md5, unless :no-md5 is specified
</p>
<p>
pallet.resource.remote-file
prevent md5 file generation when :no-versioning supplied
</p>
<p>
pallet.resource.service
Installing init scripts with init now works on rhel based machines.
</p>
<p>
pallet.resource.stevedore
Improved hashlib from <a href="https://github.com/charles-dyfis-net/pallet/commit/8e5e1df53476aedd9d32f525cf0241f8a3763269">Charles Duffy</a>
</p>
<p>
pallet.resource.user
Fix translation of :user true to -r for rhel based distros.
</p>
<p>
Java crate
for sun java, add partner repository for ubuntu
</p>
<p>
tomcat crate
runs on centos and amzn-linux
fixed users database
</p>
<p>
haproxy crate
runs on centos and amzn-linux
</p>
<p>
hudson crate
runs on centos and amzn-linux
fixed for case of security disabled
</p>
<p>
zookeeper crate
now runs on centos and amzn-linux, on ec2
</p></div>
</div>
</div>
<div id="postamble">
<p class="author"> Author: Hugo Duncan
</p>
<p class="date"> Date: 2011-06-16 23:59:20 EDT</p>
<p class="creator">HTML generated by org-mode 7.4 in emacs 24</p>
</div>
</div>
</body>
</html>
