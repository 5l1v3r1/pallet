<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pallet.action.package documentation</title></head><body><div id="header"><h1><a href="index.html">Pallet 0.6.7-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="pallet.action.html">pallet.action</a></li><li><a href="pallet.action.conditional.html">pallet.action.conditional</a></li><li><a href="pallet.action.directory.html">pallet.action.directory</a></li><li><a href="pallet.action.environment.html">pallet.action.environment</a></li><li><a href="pallet.action.exec-script.html">pallet.action.exec-script</a></li><li><a href="pallet.action.file.html">pallet.action.file</a></li><li><a href="pallet.action.filesystem.html">pallet.action.filesystem</a></li><li class="current"><a href="pallet.action.package.html">pallet.action.package</a></li><li><a href="pallet.action.package.centos.html">pallet.action.package.centos</a></li><li><a href="pallet.action.package.debian-backports.html">pallet.action.package.debian-backports</a></li><li><a href="pallet.action.package.epel.html">pallet.action.package.epel</a></li><li><a href="pallet.action.package.jpackage.html">pallet.action.package.jpackage</a></li><li><a href="pallet.action.package.rpmforge.html">pallet.action.package.rpmforge</a></li><li><a href="pallet.action.remote-directory.html">pallet.action.remote-directory</a></li><li><a href="pallet.action.remote-file.html">pallet.action.remote-file</a></li><li><a href="pallet.action.retry.html">pallet.action.retry</a></li><li><a href="pallet.action.rsync.html">pallet.action.rsync</a></li><li><a href="pallet.action.service.html">pallet.action.service</a></li><li><a href="pallet.action.user.html">pallet.action.user</a></li><li><a href="pallet.action-plan.html">pallet.action-plan</a></li><li><a href="pallet.argument.html">pallet.argument</a></li><li><a href="pallet.blobstore.html">pallet.blobstore</a></li><li><a href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li><a href="pallet.blobstore.jclouds.html">pallet.blobstore.jclouds</a></li><li><a href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li><a href="pallet.command-line.html">pallet.command-line</a></li><li><a href="pallet.command-script.html">pallet.command-script</a></li><li><a href="pallet.compute.html">pallet.compute</a></li><li><a href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li><a href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li><a href="pallet.compute.jclouds.html">pallet.compute.jclouds</a></li><li><a href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li><a href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li><a href="pallet.compute.vmfest.html">pallet.compute.vmfest</a></li><li><a href="pallet.config-file.format.html">pallet.config-file.format</a></li><li><a href="pallet.configure.html">pallet.configure</a></li><li><a href="pallet.core.html">pallet.core</a></li><li><a href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li><a href="pallet.debug.html">pallet.debug</a></li><li><a href="pallet.enlive.html">pallet.enlive</a></li><li><a href="pallet.environment.html">pallet.environment</a></li><li><a href="pallet.execute.html">pallet.execute</a></li><li><a href="pallet.futures.html">pallet.futures</a></li><li><a href="pallet.main.html">pallet.main</a></li><li><a href="pallet.main-invoker.html">pallet.main-invoker</a></li><li><a href="pallet.map-merge.html">pallet.map-merge</a></li><li><a href="pallet.maven.html">pallet.maven</a></li><li><a href="pallet.md5crypt.html">pallet.md5crypt</a></li><li><a href="pallet.node.html">pallet.node</a></li><li><a href="pallet.parameter.html">pallet.parameter</a></li><li><a href="pallet.phase.html">pallet.phase</a></li><li><a href="pallet.repl.html">pallet.repl</a></li><li><a href="pallet.request-map.html">pallet.request-map</a></li><li><a href="pallet.resource.html">pallet.resource</a></li><li><a href="pallet.resource.directory.html">pallet.resource.directory</a></li><li><a href="pallet.resource.exec-script.html">pallet.resource.exec-script</a></li><li><a href="pallet.resource.file.html">pallet.resource.file</a></li><li><a href="pallet.resource.filesystem.html">pallet.resource.filesystem</a></li><li><a href="pallet.resource.filesystem-layout.html">pallet.resource.filesystem-layout</a></li><li><a href="pallet.resource.format.html">pallet.resource.format</a></li><li><a href="pallet.resource.hostinfo.html">pallet.resource.hostinfo</a></li><li><a href="pallet.resource.lib.html">pallet.resource.lib</a></li><li><a href="pallet.resource.network-service.html">pallet.resource.network-service</a></li><li><a href="pallet.resource.package.html">pallet.resource.package</a></li><li><a href="pallet.resource.remote-directory.html">pallet.resource.remote-directory</a></li><li><a href="pallet.resource.remote-file.html">pallet.resource.remote-file</a></li><li><a href="pallet.resource.resource-when.html">pallet.resource.resource-when</a></li><li><a href="pallet.resource.rsync.html">pallet.resource.rsync</a></li><li><a href="pallet.resource.service.html">pallet.resource.service</a></li><li><a href="pallet.resource.shell.html">pallet.resource.shell</a></li><li><a href="pallet.resource.user.html">pallet.resource.user</a></li><li><a href="pallet.script.lib.html">pallet.script.lib</a></li><li><a href="pallet.session.html">pallet.session</a></li><li><a href="pallet.shell.html">pallet.shell</a></li><li><a href="pallet.strint.html">pallet.strint</a></li><li><a href="pallet.target.html">pallet.target</a></li><li><a href="pallet.task.add-service.html">pallet.task.add-service</a></li><li><a href="pallet.task.containers.html">pallet.task.containers</a></li><li><a href="pallet.task.converge.html">pallet.task.converge</a></li><li><a href="pallet.task.converge-cluster.html">pallet.task.converge-cluster</a></li><li><a href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li><a href="pallet.task.destroy-cluster.html">pallet.task.destroy-cluster</a></li><li><a href="pallet.task.help.html">pallet.task.help</a></li><li><a href="pallet.task.images.html">pallet.task.images</a></li><li><a href="pallet.task.lift.html">pallet.task.lift</a></li><li><a href="pallet.task.new-project.html">pallet.task.new-project</a></li><li><a href="pallet.task.nodes.html">pallet.task.nodes</a></li><li><a href="pallet.task.providers.html">pallet.task.providers</a></li><li><a href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li><a href="pallet.task.version.html">pallet.task.version</a></li><li><a href="pallet.task.vmfest-script.html">pallet.task.vmfest-script</a></li><li><a href="pallet.template.html">pallet.template</a></li><li><a href="pallet.template.properties.html">pallet.template.properties</a></li><li><a href="pallet.utils.html">pallet.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="pallet.action.package.html#var-add-rpm">add-rpm</a></li><li><a href="pallet.action.package.html#var-add-scope">add-scope</a></li><li><a href="pallet.action.package.html#var-add-scope*">add-scope*</a></li><li><a href="pallet.action.package.html#var-configure-package-manager">configure-package-manager</a></li><li><a href="pallet.action.package.html#var-format-source">format-source</a></li><li><a href="pallet.action.package.html#var-minimal-packages">minimal-packages</a></li><li><a href="pallet.action.package.html#var-package">package</a></li><li><a href="pallet.action.package.html#var-package-manager">package-manager</a></li><li><a href="pallet.action.package.html#var-package-manager*">package-manager*</a></li><li><a href="pallet.action.package.html#var-package-manager-option">package-manager-option</a></li><li><a href="pallet.action.package.html#var-package-source">package-source</a></li><li><a href="pallet.action.package.html#var-package-source*">package-source*</a></li><li><a href="pallet.action.package.html#var-packages">packages</a></li></ul></div><div class="namespace-docs" id="content"><h2>pallet.action.package documentation</h2><pre class="doc">Package management action.

`package` is used to install or remove a package.

`package-source` is used to specify a non-standard source for packages.</pre><div class="public" id="var-add-rpm"><h3>add-rpm</h3><div class="usage"><code>(add-rpm request rpm-name &amp; {:as options})</code></div><pre class="doc">Add an rpm.  Source options are as for remote file.
</pre></div><div class="public" id="var-add-scope"><h3>add-scope</h3><div class="usage"><code>(add-scope opts)</code></div><pre class="doc">Add a scope to an apt source
</pre></div><div class="public" id="var-add-scope*"><h3>add-scope*</h3><div class="usage"><code>(add-scope* type scope file)</code></div><pre class="doc">Add a scope to all the existing package sources. Aptitude specific.
</pre></div><div class="public" id="var-configure-package-manager"><h3>configure-package-manager</h3><div class="usage"></div><pre class="doc">Configure the package manager
</pre></div><div class="public" id="var-format-source"><h3>format-source</h3><div class="usage"></div><pre class="doc">Format a package source definition
</pre></div><div class="public" id="var-minimal-packages"><h3>minimal-packages</h3><div class="usage"><code>(minimal-packages session)</code></div><pre class="doc">Add minimal packages for pallet to function
</pre></div><div class="public" id="var-package"><h3>package</h3><div class="usage"><code>(package session package-name &amp; {:keys [action y force purge enable disable priority], :or {action :install, y true, priority 50}, :as options})</code></div><pre class="doc">Install or remove a package.

Options
 - :action [:install | :remove | :upgrade]
 - :purge [true|false]         when removing, whether to remove all config
 - :enable [repo|(seq repo)]   enable specific repository
 - :disable [repo|(seq repo)]  disable specific repository
 - :priority n                 priority (0-100, default 50)

Package management occurs in one shot, so that the package manager can
maintain a consistent view.</pre></div><div class="public" id="var-package-manager"><h3>package-manager</h3><div class="usage"><code>(package-manager session package-manager-args)</code></div><pre class="doc">Package manager controls.

`action` is one of the following:
- :update          - update the list of available packages
- :list-installed  - output a list of the installed packages
- :add-scope       - enable a scope (eg. multiverse, non-free)

To refresh the list of packages known to the pakage manager:
    (package-manager session :update)

To enable multiverse on ubuntu:
    (package-manager session :add-scope :scope :multiverse)

To enable non-free on debian:
    (package-manager session :add-scope :scope :non-free)</pre></div><div class="public" id="var-package-manager*"><h3>package-manager*</h3><div class="usage"><code>(package-manager* session action &amp; options)</code></div><pre class="doc">Package management.
</pre></div><div class="public" id="var-package-manager-option"><h3>package-manager-option</h3><div class="usage"></div><pre class="doc">Provide packager specific options
</pre></div><div class="public" id="var-package-source"><h3>package-source</h3><div class="usage"></div><pre class="doc">Control package sources.
Options are the package manager keywords, each specifying a map of
packager specific options.

:aptitude
  - :source-type string   - source type (deb)
  - :url url              - repository url
  - :scopes seq           - scopes to enable for repository
  - :key-url url          - url for key
  - :key-id id            - id for key to look it up from keyserver

:yum
  - :name                 - repository name
  - :url url          - repository base url
  - :gpgkey url           - gpg key url for repository

Example
    (package-source &quot;Partner&quot;
      :aptitude {:url &quot;http://archive.canonical.com/&quot;
                 :scopes [&quot;partner&quot;]})</pre></div><div class="public" id="var-package-source*"><h3>package-source*</h3><div class="usage"><code>(package-source* session name &amp; {:as options})</code></div><pre class="doc">Add a packager source.
</pre></div><div class="public" id="var-packages"><h3>packages</h3><div class="usage"><code>(packages session &amp; {:keys [yum aptitude pacman brew], :as options})</code></div><pre class="doc">Install a list of packages keyed on packager.
(packages session
  :yum [&quot;git&quot; &quot;git-email&quot;]
  :aptitude [&quot;git-core&quot; &quot;git-email&quot;])</pre></div></div></body></html>