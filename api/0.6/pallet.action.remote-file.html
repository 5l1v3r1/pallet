<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pallet.action.remote-file documentation</title></head><body><div id="header"><h1><a href="index.html">Pallet 0.6 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="pallet.action.html">pallet.action</a></li><li><a href="pallet.action.conditional.html">pallet.action.conditional</a></li><li><a href="pallet.action.directory.html">pallet.action.directory</a></li><li><a href="pallet.action.environment.html">pallet.action.environment</a></li><li><a href="pallet.action.exec-script.html">pallet.action.exec-script</a></li><li><a href="pallet.action.file.html">pallet.action.file</a></li><li><a href="pallet.action.filesystem.html">pallet.action.filesystem</a></li><li><a href="pallet.action.package.html">pallet.action.package</a></li><li><a href="pallet.action.package.centos.html">pallet.action.package.centos</a></li><li><a href="pallet.action.package.debian-backports.html">pallet.action.package.debian-backports</a></li><li><a href="pallet.action.package.epel.html">pallet.action.package.epel</a></li><li><a href="pallet.action.package.jpackage.html">pallet.action.package.jpackage</a></li><li><a href="pallet.action.package.rpmforge.html">pallet.action.package.rpmforge</a></li><li><a href="pallet.action.remote-directory.html">pallet.action.remote-directory</a></li><li class="current"><a href="pallet.action.remote-file.html">pallet.action.remote-file</a></li><li><a href="pallet.action.retry.html">pallet.action.retry</a></li><li><a href="pallet.action.rsync.html">pallet.action.rsync</a></li><li><a href="pallet.action.service.html">pallet.action.service</a></li><li><a href="pallet.action.user.html">pallet.action.user</a></li><li><a href="pallet.action-plan.html">pallet.action-plan</a></li><li><a href="pallet.argument.html">pallet.argument</a></li><li><a href="pallet.blobstore.html">pallet.blobstore</a></li><li><a href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li><a href="pallet.blobstore.jclouds.html">pallet.blobstore.jclouds</a></li><li><a href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li><a href="pallet.command-line.html">pallet.command-line</a></li><li><a href="pallet.command-script.html">pallet.command-script</a></li><li><a href="pallet.compute.html">pallet.compute</a></li><li><a href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li><a href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li><a href="pallet.compute.jclouds.html">pallet.compute.jclouds</a></li><li><a href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li><a href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li><a href="pallet.compute.vmfest.html">pallet.compute.vmfest</a></li><li><a href="pallet.config-file.format.html">pallet.config-file.format</a></li><li><a href="pallet.configure.html">pallet.configure</a></li><li><a href="pallet.core.html">pallet.core</a></li><li><a href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li><a href="pallet.debug.html">pallet.debug</a></li><li><a href="pallet.enlive.html">pallet.enlive</a></li><li><a href="pallet.environment.html">pallet.environment</a></li><li><a href="pallet.execute.html">pallet.execute</a></li><li><a href="pallet.futures.html">pallet.futures</a></li><li><a href="pallet.main.html">pallet.main</a></li><li><a href="pallet.main-invoker.html">pallet.main-invoker</a></li><li><a href="pallet.map-merge.html">pallet.map-merge</a></li><li><a href="pallet.maven.html">pallet.maven</a></li><li><a href="pallet.md5crypt.html">pallet.md5crypt</a></li><li><a href="pallet.node.html">pallet.node</a></li><li><a href="pallet.parameter.html">pallet.parameter</a></li><li><a href="pallet.phase.html">pallet.phase</a></li><li><a href="pallet.repl.html">pallet.repl</a></li><li><a href="pallet.request-map.html">pallet.request-map</a></li><li><a href="pallet.resource.html">pallet.resource</a></li><li><a href="pallet.resource.directory.html">pallet.resource.directory</a></li><li><a href="pallet.resource.exec-script.html">pallet.resource.exec-script</a></li><li><a href="pallet.resource.file.html">pallet.resource.file</a></li><li><a href="pallet.resource.filesystem.html">pallet.resource.filesystem</a></li><li><a href="pallet.resource.filesystem-layout.html">pallet.resource.filesystem-layout</a></li><li><a href="pallet.resource.format.html">pallet.resource.format</a></li><li><a href="pallet.resource.hostinfo.html">pallet.resource.hostinfo</a></li><li><a href="pallet.resource.lib.html">pallet.resource.lib</a></li><li><a href="pallet.resource.network-service.html">pallet.resource.network-service</a></li><li><a href="pallet.resource.package.html">pallet.resource.package</a></li><li><a href="pallet.resource.remote-directory.html">pallet.resource.remote-directory</a></li><li><a href="pallet.resource.remote-file.html">pallet.resource.remote-file</a></li><li><a href="pallet.resource.resource-when.html">pallet.resource.resource-when</a></li><li><a href="pallet.resource.rsync.html">pallet.resource.rsync</a></li><li><a href="pallet.resource.service.html">pallet.resource.service</a></li><li><a href="pallet.resource.shell.html">pallet.resource.shell</a></li><li><a href="pallet.resource.user.html">pallet.resource.user</a></li><li><a href="pallet.script.lib.html">pallet.script.lib</a></li><li><a href="pallet.session.html">pallet.session</a></li><li><a href="pallet.shell.html">pallet.shell</a></li><li><a href="pallet.strint.html">pallet.strint</a></li><li><a href="pallet.target.html">pallet.target</a></li><li><a href="pallet.task.add-service.html">pallet.task.add-service</a></li><li><a href="pallet.task.containers.html">pallet.task.containers</a></li><li><a href="pallet.task.converge.html">pallet.task.converge</a></li><li><a href="pallet.task.converge-cluster.html">pallet.task.converge-cluster</a></li><li><a href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li><a href="pallet.task.destroy-cluster.html">pallet.task.destroy-cluster</a></li><li><a href="pallet.task.help.html">pallet.task.help</a></li><li><a href="pallet.task.images.html">pallet.task.images</a></li><li><a href="pallet.task.lift.html">pallet.task.lift</a></li><li><a href="pallet.task.new-project.html">pallet.task.new-project</a></li><li><a href="pallet.task.nodes.html">pallet.task.nodes</a></li><li><a href="pallet.task.providers.html">pallet.task.providers</a></li><li><a href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li><a href="pallet.task.version.html">pallet.task.version</a></li><li><a href="pallet.task.vmfest-script.html">pallet.task.vmfest-script</a></li><li><a href="pallet.template.html">pallet.template</a></li><li><a href="pallet.template.properties.html">pallet.template.properties</a></li><li><a href="pallet.utils.html">pallet.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="pallet.action.remote-file.html#var-all-options">all-options</a></li><li><a href="pallet.action.remote-file.html#var-content-options">content-options</a></li><li><a href="pallet.action.remote-file.html#var-ownership-options">ownership-options</a></li><li><a href="pallet.action.remote-file.html#var-remote-file">remote-file</a></li><li><a href="pallet.action.remote-file.html#var-set-force-overwrite">set-force-overwrite</a></li><li><a href="pallet.action.remote-file.html#var-set-install-new-files">set-install-new-files</a></li><li><a href="pallet.action.remote-file.html#var-transfer-file">transfer-file</a></li><li><a href="pallet.action.remote-file.html#var-version-options">version-options</a></li><li><a href="pallet.action.remote-file.html#var-with-remote-file">with-remote-file</a></li></ul></div><div class="namespace-docs" id="content"><h2>pallet.action.remote-file documentation</h2><pre class="doc">Action to specify remote file content.

`remote-file` has many options for the content of remote files.  Ownership
and mode can of course be specified. By default the remote file is versioned,
and multiple versions are kept.

Modification of remote files outside of pallet cause an error to be raised
by default.</pre><div class="public" id="var-all-options"><h3>all-options</h3><div class="usage"></div><pre class="doc">A vector of the options accepted by remote-file.  Can be used for
option forwarding when calling remote-file from other crates.</pre></div><div class="public" id="var-content-options"><h3>content-options</h3><div class="usage"></div><pre class="doc">A vector of the options accepted by remote-file.  Can be used for
option forwarding when calling remote-file from other crates.</pre></div><div class="public" id="var-ownership-options"><h3>ownership-options</h3><div class="usage"></div><pre class="doc">A vector of options for controlling ownership. Can be used for option
forwarding when calling remote-file from other crates.</pre></div><div class="public" id="var-remote-file"><h3>remote-file</h3><div class="usage"><code>(remote-file session path &amp; {:keys [action url local-file remote-file link content literal template values md5 md5-url owner group mode force blob blobstore overwrite-changes no-versioning max-versions flag-on-changed local-file-options], :as options})</code></div><pre class="doc">Remote file content management.

The `remote-file` action can specify the content of a remote file in a number
different ways.

By default, the remote-file is versioned, and 5 versions are kept.

The remote content is also verified against it's md5 hash.  If the contents
of the remote file have changed (e.g. have been edited on the remote machine)
then by default the file will not be overwritten, and an error will be raised.
To force overwrite, call `set-force-overwrite` before running `converge` or
`lift`.

Options for specifying the file's content are:
  :url url          - download the specified url to the given filepath
  :content string   - use the specified content directly
  :local-file path  - use the file on the local machine at the given path
  :remote-file path - use the file on the remote machine at the given path
  :link             - file to link to
  :literal          - prevent shell expansion on content
  :md5              - md5 for file
  :md5-url          - a url containing file's md5
  :template         - specify a template to be interpolated
  :values           - values for interpolation
  :blob             - map of :container, :path
  :blobstore        - a jclouds blobstore object (override blobstore in session)
  :insecure         - boolean to specify ignoring of SLL certs

Options for version control are:
  :overwrite-changes - flag to force overwriting of locally modified content
  :no-versioning    - do not version the file
  :max-versions     - specfy the number of versions to keep (default 5)
  :flag-on-changed  - flag to set if file is changed

Options for specifying the file's permissions are:
  :owner user-name
  :group group-name
  :mode  file-mode

To copy the content of a local file to a remote file:
    (remote-file session &quot;remote/path&quot; :local-file &quot;local/path&quot;)

To copy the content of one remote file to another remote file:
    (remote-file session &quot;remote/path&quot; :remote-file &quot;remote/source/path&quot;)

To link one remote file to another remote file:
    (remote-file session &quot;remote/path&quot; :link &quot;remote/source/path&quot;)

To download a url to a remote file:
    (remote-file session &quot;remote/path&quot; :url &quot;http://a.com/path&quot;)

If a url to a md5 file is also available, then it can be specified to prevent
unnecessary downloads and to verify the download.
    (remote-file session &quot;remote/path&quot;
      :url &quot;http://a.com/path&quot;
      :md5-url &quot;http://a.com/path.md5&quot;)

If the md5 of the file to download, it can be specified to prevent unnecessary
downloads and to verify the download.
    (remote-file session &quot;remote/path&quot;
      :url &quot;http://a.com/path&quot;
      :md5 &quot;6de9439834c9147569741d3c9c9fc010&quot;)

Content can also be copied from a blobstore.
    (remote-file session &quot;remote/path&quot;
      :blob {:container &quot;container&quot; :path &quot;blob&quot;})</pre></div><div class="public" id="var-set-force-overwrite"><h3>set-force-overwrite</h3><div class="usage"><code>(set-force-overwrite flag)</code></div><pre class="doc">Globally force installation of new files, even if content on node has
changed.</pre></div><div class="public" id="var-set-install-new-files"><h3>set-install-new-files</h3><div class="usage"><code>(set-install-new-files flag)</code></div><pre class="doc">Set boolean flag to control installation of new files
</pre></div><div class="public" id="var-transfer-file"><h3>transfer-file</h3><div class="usage"><code>(transfer-file session local-path remote-path {:as options})</code></div><pre class="doc">Function to transfer a local file.
</pre></div><div class="public" id="var-version-options"><h3>version-options</h3><div class="usage"></div><pre class="doc">A vector of options for controlling versions. Can be used for option
forwarding when calling remote-file from other crates.</pre></div><div class="public" id="var-with-remote-file"><h3>with-remote-file</h3><div class="usage"><code>(with-remote-file session f path &amp; args)</code></div><pre class="doc">Function to call f with a local copy of the sessioned remote path.
f should be a function taking [session local-path &amp; _], where local-path will
be a File with a copy of the remote file (which will be unlinked after
calling f.</pre></div></div></body></html>