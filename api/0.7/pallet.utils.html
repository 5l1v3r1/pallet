<html lang="en">
  <head>
    <title>pallet.utils documentation</title>
    <link href="css/default.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/page_effects.js"></script>
  </head>
  <body>
    <header>
      <div id="header">
        <h1 class="project-title">Pallet 0.7 API documentation</h1>
      </div>
    </header>
    <navigation>
      <div id="namespaces" class="sidebar">
        <h3>Namespaces</h3>
        <ul class="ns-links">
          <li class="ns-link"><a href="pallet.action.html">pallet.action</a></li><li class="ns-link"><a href="pallet.action.conditional.html">pallet.action.conditional</a></li><li class="ns-link"><a href="pallet.action.directory.html">pallet.action.directory</a></li><li class="ns-link"><a href="pallet.action.environment.html">pallet.action.environment</a></li><li class="ns-link"><a href="pallet.action.exec-script.html">pallet.action.exec-script</a></li><li class="ns-link"><a href="pallet.action.file.html">pallet.action.file</a></li><li class="ns-link"><a href="pallet.action.filesystem.html">pallet.action.filesystem</a></li><li class="ns-link"><a href="pallet.action.package.html">pallet.action.package</a></li><li class="ns-link"><a href="pallet.action.package.centos.html">pallet.action.package.centos</a></li><li class="ns-link"><a href="pallet.action.package.debian-backports.html">pallet.action.package.debian-backports</a></li><li class="ns-link"><a href="pallet.action.package.epel.html">pallet.action.package.epel</a></li><li class="ns-link"><a href="pallet.action.package.jpackage.html">pallet.action.package.jpackage</a></li><li class="ns-link"><a href="pallet.action.package.rpmforge.html">pallet.action.package.rpmforge</a></li><li class="ns-link"><a href="pallet.action.remote-directory.html">pallet.action.remote-directory</a></li><li class="ns-link"><a href="pallet.action.remote-file.html">pallet.action.remote-file</a></li><li class="ns-link"><a href="pallet.action.retry.html">pallet.action.retry</a></li><li class="ns-link"><a href="pallet.action.rsync.html">pallet.action.rsync</a></li><li class="ns-link"><a href="pallet.action.service.html">pallet.action.service</a></li><li class="ns-link"><a href="pallet.action.user.html">pallet.action.user</a></li><li class="ns-link"><a href="pallet.action-plan.html">pallet.action-plan</a></li><li class="ns-link"><a href="pallet.argument.html">pallet.argument</a></li><li class="ns-link"><a href="pallet.blobstore.html">pallet.blobstore</a></li><li class="ns-link"><a href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li class="ns-link"><a href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li class="ns-link"><a href="pallet.command-line.html">pallet.command-line</a></li><li class="ns-link"><a href="pallet.command-script.html">pallet.command-script</a></li><li class="ns-link"><a href="pallet.compute.html">pallet.compute</a></li><li class="ns-link"><a href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li class="ns-link"><a href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li class="ns-link"><a href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li class="ns-link"><a href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li class="ns-link"><a href="pallet.config-file.format.html">pallet.config-file.format</a></li><li class="ns-link"><a href="pallet.configure.html">pallet.configure</a></li><li class="ns-link"><a href="pallet.core.html">pallet.core</a></li><li class="ns-link"><a href="pallet.crate.automated-admin-user.html">pallet.crate.automated-admin-user</a></li><li class="ns-link"><a href="pallet.crate.crontab.html">pallet.crate.crontab</a></li><li class="ns-link"><a href="pallet.crate.etc-default.html">pallet.crate.etc-default</a></li><li class="ns-link"><a href="pallet.crate.etc-hosts.html">pallet.crate.etc-hosts</a></li><li class="ns-link"><a href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li class="ns-link"><a href="pallet.crate.ssh-key.html">pallet.crate.ssh-key</a></li><li class="ns-link"><a href="pallet.crate.sudoers.html">pallet.crate.sudoers</a></li><li class="ns-link"><a href="pallet.debug.html">pallet.debug</a></li><li class="ns-link"><a href="pallet.enlive.html">pallet.enlive</a></li><li class="ns-link"><a href="pallet.environment.html">pallet.environment</a></li><li class="ns-link"><a href="pallet.execute.html">pallet.execute</a></li><li class="ns-link"><a href="pallet.futures.html">pallet.futures</a></li><li class="ns-link"><a href="pallet.main.html">pallet.main</a></li><li class="ns-link"><a href="pallet.main-invoker.html">pallet.main-invoker</a></li><li class="ns-link"><a href="pallet.map-merge.html">pallet.map-merge</a></li><li class="ns-link"><a href="pallet.md5crypt.html">pallet.md5crypt</a></li><li class="ns-link"><a href="pallet.node.html">pallet.node</a></li><li class="ns-link"><a href="pallet.parameter.html">pallet.parameter</a></li><li class="ns-link"><a href="pallet.phase.html">pallet.phase</a></li><li class="ns-link"><a href="pallet.repl.html">pallet.repl</a></li><li class="ns-link"><a href="pallet.request-map.html">pallet.request-map</a></li><li class="ns-link"><a href="pallet.resource.html">pallet.resource</a></li><li class="ns-link"><a href="pallet.resource.directory.html">pallet.resource.directory</a></li><li class="ns-link"><a href="pallet.resource.exec-script.html">pallet.resource.exec-script</a></li><li class="ns-link"><a href="pallet.resource.file.html">pallet.resource.file</a></li><li class="ns-link"><a href="pallet.resource.filesystem.html">pallet.resource.filesystem</a></li><li class="ns-link"><a href="pallet.resource.filesystem-layout.html">pallet.resource.filesystem-layout</a></li><li class="ns-link"><a href="pallet.resource.format.html">pallet.resource.format</a></li><li class="ns-link"><a href="pallet.resource.hostinfo.html">pallet.resource.hostinfo</a></li><li class="ns-link"><a href="pallet.resource.lib.html">pallet.resource.lib</a></li><li class="ns-link"><a href="pallet.resource.network-service.html">pallet.resource.network-service</a></li><li class="ns-link"><a href="pallet.resource.package.html">pallet.resource.package</a></li><li class="ns-link"><a href="pallet.resource.remote-directory.html">pallet.resource.remote-directory</a></li><li class="ns-link"><a href="pallet.resource.remote-file.html">pallet.resource.remote-file</a></li><li class="ns-link"><a href="pallet.resource.resource-when.html">pallet.resource.resource-when</a></li><li class="ns-link"><a href="pallet.resource.rsync.html">pallet.resource.rsync</a></li><li class="ns-link"><a href="pallet.resource.service.html">pallet.resource.service</a></li><li class="ns-link"><a href="pallet.resource.shell.html">pallet.resource.shell</a></li><li class="ns-link"><a href="pallet.resource.user.html">pallet.resource.user</a></li><li class="ns-link"><a href="pallet.script.lib.html">pallet.script.lib</a></li><li class="ns-link"><a href="pallet.session.html">pallet.session</a></li><li class="ns-link"><a href="pallet.shell.html">pallet.shell</a></li><li class="ns-link"><a href="pallet.strint.html">pallet.strint</a></li><li class="ns-link"><a href="pallet.target.html">pallet.target</a></li><li class="ns-link"><a href="pallet.task.add-service.html">pallet.task.add-service</a></li><li class="ns-link"><a href="pallet.task.config.html">pallet.task.config</a></li><li class="ns-link"><a href="pallet.task.containers.html">pallet.task.containers</a></li><li class="ns-link"><a href="pallet.task.converge.html">pallet.task.converge</a></li><li class="ns-link"><a href="pallet.task.converge-cluster.html">pallet.task.converge-cluster</a></li><li class="ns-link"><a href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li class="ns-link"><a href="pallet.task.destroy-cluster.html">pallet.task.destroy-cluster</a></li><li class="ns-link"><a href="pallet.task.help.html">pallet.task.help</a></li><li class="ns-link"><a href="pallet.task.images.html">pallet.task.images</a></li><li class="ns-link"><a href="pallet.task.lift.html">pallet.task.lift</a></li><li class="ns-link"><a href="pallet.task.new-project.html">pallet.task.new-project</a></li><li class="ns-link"><a href="pallet.task.nodes.html">pallet.task.nodes</a></li><li class="ns-link"><a href="pallet.task.providers.html">pallet.task.providers</a></li><li class="ns-link"><a href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li class="ns-link"><a href="pallet.task.version.html">pallet.task.version</a></li><li class="ns-link"><a href="pallet.template.html">pallet.template</a></li><li class="ns-link"><a href="pallet.template.properties.html">pallet.template.properties</a></li><li class="ns-link"><a href="pallet.utils.html">pallet.utils</a></li>
        </ul>
      </div>
      <div id="vars" class="sidebar">
        <h3>Public Vars</h3>
        <ul class="ns-var-links">
          <li class="ns-var-link"><a href="pallet.utils.html#var-*admin-user*">*admin-user*</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-apply-map">apply-map</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-as-string">as-string</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-base64-md5">base64-md5</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-classpath">classpath</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-classpath-jarfiles">classpath-jarfiles</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-classpath-urls">classpath-urls</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-default-private-key-path">default-private-key-path</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-default-public-key-path">default-public-key-path</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-dissoc-if-empty">dissoc-if-empty</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-dissoc-keys">dissoc-keys</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-file-for-url">file-for-url</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-find-var-with-require">find-var-with-require</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-forward-to-script-lib">forward-to-script-lib</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-jar-file%3F">jar-file?</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-make-user">make-user</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-map-with-keys-as-symbols">map-with-keys-as-symbols</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-maybe-update-in">maybe-update-in</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-middleware">middleware</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-pipe">pipe</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-pprint-lines">pprint-lines</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-quoted">quoted</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-resource-properties">resource-properties</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-slurp-as-byte-array">slurp-as-byte-array</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-tmpdir">tmpdir</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-tmpfile">tmpfile</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-with-temp-file">with-temp-file</a></li><li class="ns-var-link"><a href="pallet.utils.html#var-with-temporary">with-temporary</a></li>
        </ul>
      </div>
    </navigation>
    <article>
      <div id="content" class="namespace-docs">
        <h2 class="namespace-title">pallet.utils documentation</h2>
        <div class="doc"><p>Utilities used across pallet.</p>
</div>
        <div class="ns-vars">
          <div class="public">
            <h3 id="var-*admin-user*">*admin-user*</h3>
            
            
            
            <div class="doc"><p>The admin user is used for running remote admin commands that require
root permissions.  The default admin user is taken from the
pallet.admin.username property.  If not specified then the user.name property
is used. The admin user can also be specified in config.clj when running
tasks from the command line.</p>
</div>
          </div><div class="public">
            <h3 id="var-apply-map">apply-map</h3>
            <div class="usage">[f args* argmap]</div>
            <div class="added">
              <p>Added: <span class="version">0.6.8</span></p>
            </div>
            
            <div class="doc"><p>Applies fn f to the argument list formed by prepending args to
(apply concat argmap). Similar to clojure.core/apply, but taking a final map
instead of a sequence.</p>
</div>
          </div><div class="public">
            <h3 id="var-as-string">as-string</h3>
            <div class="usage">[arg]</div>
            
            
            <div class="doc"><p>Return the string value of the argument.</p>
</div>
          </div><div class="public">
            <h3 id="var-base64-md5">base64-md5</h3>
            <div class="usage">[unsafe-id]</div>
            
            
            <div class="doc"><p>Computes the base64 encoding of the md5 of a string</p>
</div>
          </div><div class="public">
            <h3 id="var-classpath">classpath</h3>
            <div class="usage">[]</div>
            
            
            <div class="doc"><p>Return the classpath File's for the current clojure classloader.</p>
</div>
          </div><div class="public">
            <h3 id="var-classpath-jarfiles">classpath-jarfiles</h3>
            <div class="usage">[]</div>
            
            
            <div class="doc"><p>Returns a sequence of JarFile objects for the JAR files on classpath.</p>
</div>
          </div><div class="public">
            <h3 id="var-classpath-urls">classpath-urls</h3>
            <div class="usage">[]</div>
            
            
            <div class="doc"><p>Return the classpath URL's for the current clojure classloader.</p>
</div>
          </div><div class="public">
            <h3 id="var-default-private-key-path">default-private-key-path</h3>
            <div class="usage">[]</div>
            
            
            <div class="doc"><p>Return the default private key path.</p>
</div>
          </div><div class="public">
            <h3 id="var-default-public-key-path">default-public-key-path</h3>
            <div class="usage">[]</div>
            
            
            <div class="doc"><p>Return the default public key path</p>
</div>
          </div><div class="public">
            <h3 id="var-dissoc-if-empty">dissoc-if-empty</h3>
            <div class="usage">[m key]</div>
            
            
            <div class="doc"><p>Like clojure.core/dissoc, except it only dissoc's if the value at the
keyword is nil.</p>
</div>
          </div><div class="public">
            <h3 id="var-dissoc-keys">dissoc-keys</h3>
            <div class="usage">[m keys]</div>
            
            
            <div class="doc"><p>Like clojure.core/dissoc, except it takes a vector of keys to remove</p>
</div>
          </div><div class="public">
            <h3 id="var-file-for-url">file-for-url</h3>
            <div class="usage">[url]</div>
            
            
            <div class="doc"><p>Convert a URL to a File. </p>
</div>
          </div><div class="public">
            <h3 id="var-find-var-with-require">find-var-with-require</h3>
            <div class="usage">[sym]</div><div class="usage">[ns sym]</div>
            
            
            <div class="doc"><p>Find the var for the given namespace and symbol. If the namespace does
not exist, then it will be required.
    (find-var-with-require 'my.ns 'a-symbol)
    (find-var-with-require 'my.ns/a-symbol)</p>

<p>If the namespace exists, but can not be loaded, and exception is thrown.  If
the namsepace is loaded, but the symbol is not found, then nil is returned.</p>
</div>
          </div><div class="public">
            <h3 id="var-forward-to-script-lib">forward-to-script-lib</h3>
            <div class="usage">[&amp; symbols]</div>
            
            
            <div class="doc"><p>Forward a script to the new script lib</p>
</div>
          </div><div class="public">
            <h3 id="var-jar-file%3F">jar-file?</h3>
            <div class="usage">[file]</div>
            
            
            <div class="doc"><p>Returns true if file is a normal file with a .jar or .JAR extension.</p>
</div>
          </div><div class="public">
            <h3 id="var-make-user">make-user</h3>
            <div class="usage">[username &amp; {:keys [public-key-path private-key-path passphrase password sudo-password no-sudo], :as options}]</div>
            
            
            <div class="doc"><p>Creates a User record with the given username and options. Generally used
in conjunction with <em>admin-user</em> and pallet.core/with-admin-user, or passed
to <code>lift</code> or <code>converge</code> as the named :user argument.</p>

<p>Options:
 - :public-key-path (defaults to ~/.ssh/id_rsa.pub)
 - :private-key-path (defaults to ~/.ssh/id_rsa)
 - :passphrase
 - :password
 - :sudo-password (defaults to :password)
 - :no-sudo</p>
</div>
          </div><div class="public">
            <h3 id="var-map-with-keys-as-symbols">map-with-keys-as-symbols</h3>
            <div class="usage">[m]</div>
            
            
            <div class="doc"><p>Produce a map that is the same as m, but with all keys are converted to
symbols.</p>
</div>
          </div><div class="public">
            <h3 id="var-maybe-update-in">maybe-update-in</h3>
            <div class="usage">[m [&amp; ks] f &amp; args]</div>
            
            
            <div class="doc"><p>'Updates' a value in a nested associative structure, where ks is a
sequence of keys and f is a function that will take the old value
and any supplied args and return the new value, and returns a new
nested structure.  If any levels do not exist, hash-maps will be
created only if the update function returns a non-nil value. If
the update function returns nil, the map is returned unmodified.</p>
</div>
          </div><div class="public">
            <h3 id="var-middleware">middleware</h3>
            <div class="usage">[&amp; forms]</div>
            
            
            <div class="doc"><p>Build a middleware processing pipeline from the specified forms.
The result is a middleware.</p>
</div>
          </div><div class="public">
            <h3 id="var-pipe">pipe</h3>
            <div class="usage">[&amp; forms]</div>
            
            
            <div class="doc"><p>Build a session processing pipeline from the specified forms.</p>
</div>
          </div><div class="public">
            <h3 id="var-pprint-lines">pprint-lines</h3>
            <div class="usage">[s]</div>
            
            
            <div class="doc"><p>Pretty print a multiline string</p>
</div>
          </div><div class="public">
            <h3 id="var-quoted">quoted</h3>
            <div class="usage">[s]</div>
            
            
            <div class="doc"><p>Return the string value of the argument in quotes.</p>
</div>
          </div><div class="public">
            <h3 id="var-resource-properties">resource-properties</h3>
            <div class="usage">[path]</div>
            
            
            <div class="doc"><p>Given a resource <code>path</code>, load it as a java properties file.
Returns nil if resource not found.</p>
</div>
          </div><div class="public">
            <h3 id="var-slurp-as-byte-array">slurp-as-byte-array</h3>
            <div class="usage">[file]</div>
            
            
            <div class="doc"><p>Read the given file as a byte array.</p>
</div>
          </div><div class="public">
            <h3 id="var-tmpdir">tmpdir</h3>
            <div class="usage">[]</div>
            
            
            <div class="doc"><p>Create a temporary directory.</p>
</div>
          </div><div class="public">
            <h3 id="var-tmpfile">tmpfile</h3>
            <div class="usage">[]</div><div class="usage">[dir]</div>
            
            
            <div class="doc"><p>Create a temporary file</p>
</div>
          </div><div class="public">
            <h3 id="var-with-temp-file">with-temp-file</h3>
            <div class="usage">[[varname content] &amp; body]</div>
            
            
            <div class="doc"><p>Create a block where <code>varname</code> is a temporary <code>File</code> containing <code>content</code>.</p>
</div>
          </div><div class="public">
            <h3 id="var-with-temporary">with-temporary</h3>
            <div class="usage">[bindings &amp; body]</div>
            
            
            <div class="doc"><p>A block scope allowing multiple bindings to expressions.  Each binding will
have the member function <code>delete</code> called on it.</p>
</div>
          </div>
        </div>
      </div>
    </article>
  </body>

</html>