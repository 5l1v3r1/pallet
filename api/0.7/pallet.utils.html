<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pallet.utils documentation</title></head><body><div id="header"><h1><a href="index.html">Pallet 0.7 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="pallet.action.html">pallet.action</a></li><li><a href="pallet.action-impl.html">pallet.action-impl</a></li><li><a href="pallet.action-plan.html">pallet.action-plan</a></li><li><a href="pallet.actions.html">pallet.actions</a></li><li><a href="pallet.actions.direct.html">pallet.actions.direct</a></li><li><a href="pallet.actions.direct.conditional.html">pallet.actions.direct.conditional</a></li><li><a href="pallet.actions.direct.directory.html">pallet.actions.direct.directory</a></li><li><a href="pallet.actions.direct.exec-script.html">pallet.actions.direct.exec-script</a></li><li><a href="pallet.actions.direct.file.html">pallet.actions.direct.file</a></li><li><a href="pallet.actions.direct.package.html">pallet.actions.direct.package</a></li><li><a href="pallet.actions.direct.remote-directory.html">pallet.actions.direct.remote-directory</a></li><li><a href="pallet.actions.direct.remote-file.html">pallet.actions.direct.remote-file</a></li><li><a href="pallet.actions.direct.retry.html">pallet.actions.direct.retry</a></li><li><a href="pallet.actions.direct.rsync.html">pallet.actions.direct.rsync</a></li><li><a href="pallet.actions.direct.service.html">pallet.actions.direct.service</a></li><li><a href="pallet.actions.direct.user.html">pallet.actions.direct.user</a></li><li><a href="pallet.actions-impl.html">pallet.actions-impl</a></li><li><a href="pallet.argument.html">pallet.argument</a></li><li><a href="pallet.blobstore.html">pallet.blobstore</a></li><li><a href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li><a href="pallet.blobstore.jclouds.html">pallet.blobstore.jclouds</a></li><li><a href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li><a href="pallet.cache.html">pallet.cache</a></li><li><a href="pallet.cache.impl.html">pallet.cache.impl</a></li><li><a href="pallet.command-line.html">pallet.command-line</a></li><li><a href="pallet.component.html">pallet.component</a></li><li><a href="pallet.compute.html">pallet.compute</a></li><li><a href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li><a href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li><a href="pallet.compute.jclouds.html">pallet.compute.jclouds</a></li><li><a href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li><a href="pallet.compute.mccloud.html">pallet.compute.mccloud</a></li><li><a href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li><a href="pallet.compute.vmfest.html">pallet.compute.vmfest</a></li><li><a href="pallet.config-file.format.html">pallet.config-file.format</a></li><li><a href="pallet.configure.html">pallet.configure</a></li><li><a href="pallet.context.html">pallet.context</a></li><li><a href="pallet.core.html">pallet.core</a></li><li><a href="pallet.crate.automated-admin-user.html">pallet.crate.automated-admin-user</a></li><li><a href="pallet.crate.crontab.html">pallet.crate.crontab</a></li><li><a href="pallet.crate.environment.html">pallet.crate.environment</a></li><li><a href="pallet.crate.etc-default.html">pallet.crate.etc-default</a></li><li><a href="pallet.crate.etc-hosts.html">pallet.crate.etc-hosts</a></li><li><a href="pallet.crate.filesystem.html">pallet.crate.filesystem</a></li><li><a href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li><a href="pallet.crate.package.centos.html">pallet.crate.package.centos</a></li><li><a href="pallet.crate.package.debian-backports.html">pallet.crate.package.debian-backports</a></li><li><a href="pallet.crate.package.epel.html">pallet.crate.package.epel</a></li><li><a href="pallet.crate.package.jpackage.html">pallet.crate.package.jpackage</a></li><li><a href="pallet.crate.package.rpmforge.html">pallet.crate.package.rpmforge</a></li><li><a href="pallet.crate.ssh-key.html">pallet.crate.ssh-key</a></li><li><a href="pallet.crate.sudoers.html">pallet.crate.sudoers</a></li><li><a href="pallet.debug.html">pallet.debug</a></li><li><a href="pallet.echo.execute.html">pallet.echo.execute</a></li><li><a href="pallet.enlive.html">pallet.enlive</a></li><li><a href="pallet.environment.html">pallet.environment</a></li><li><a href="pallet.event.html">pallet.event</a></li><li><a href="pallet.execute.html">pallet.execute</a></li><li><a href="pallet.executors.html">pallet.executors</a></li><li><a href="pallet.futures.html">pallet.futures</a></li><li><a href="pallet.local.execute.html">pallet.local.execute</a></li><li><a href="pallet.main.html">pallet.main</a></li><li><a href="pallet.main-invoker.html">pallet.main-invoker</a></li><li><a href="pallet.map-merge.html">pallet.map-merge</a></li><li><a href="pallet.maven.html">pallet.maven</a></li><li><a href="pallet.md5crypt.html">pallet.md5crypt</a></li><li><a href="pallet.monad.html">pallet.monad</a></li><li><a href="pallet.monad.state-accessors.html">pallet.monad.state-accessors</a></li><li><a href="pallet.node.html">pallet.node</a></li><li><a href="pallet.node-value.html">pallet.node-value</a></li><li><a href="pallet.parameter.html">pallet.parameter</a></li><li><a href="pallet.phase.html">pallet.phase</a></li><li><a href="pallet.plugin.html">pallet.plugin</a></li><li><a href="pallet.repl.html">pallet.repl</a></li><li><a href="pallet.request-map.html">pallet.request-map</a></li><li><a href="pallet.script.lib.html">pallet.script.lib</a></li><li><a href="pallet.script-builder.html">pallet.script-builder</a></li><li><a href="pallet.script-exec.html">pallet.script-exec</a></li><li><a href="pallet.session.html">pallet.session</a></li><li><a href="pallet.session-verify.html">pallet.session-verify</a></li><li><a href="pallet.shell.html">pallet.shell</a></li><li><a href="pallet.ssh.execute.html">pallet.ssh.execute</a></li><li><a href="pallet.strint.html">pallet.strint</a></li><li><a href="pallet.target.html">pallet.target</a></li><li><a href="pallet.task.add-service.html">pallet.task.add-service</a></li><li><a href="pallet.task.containers.html">pallet.task.containers</a></li><li><a href="pallet.task.converge.html">pallet.task.converge</a></li><li><a href="pallet.task.converge-cluster.html">pallet.task.converge-cluster</a></li><li><a href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li><a href="pallet.task.destroy-cluster.html">pallet.task.destroy-cluster</a></li><li><a href="pallet.task.help.html">pallet.task.help</a></li><li><a href="pallet.task.images.html">pallet.task.images</a></li><li><a href="pallet.task.lift.html">pallet.task.lift</a></li><li><a href="pallet.task.new-project.html">pallet.task.new-project</a></li><li><a href="pallet.task.nodes.html">pallet.task.nodes</a></li><li><a href="pallet.task.providers.html">pallet.task.providers</a></li><li><a href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li><a href="pallet.task.version.html">pallet.task.version</a></li><li><a href="pallet.task.vmfest-script.html">pallet.task.vmfest-script</a></li><li><a href="pallet.template.html">pallet.template</a></li><li><a href="pallet.template.properties.html">pallet.template.properties</a></li><li class="current"><a href="pallet.utils.html">pallet.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="pallet.utils.html#var-*admin-user*">*admin-user*</a></li><li><a href="pallet.utils.html#var-as-string">as-string</a></li><li><a href="pallet.utils.html#var-base64-md5">base64-md5</a></li><li><a href="pallet.utils.html#var-classpath">classpath</a></li><li><a href="pallet.utils.html#var-classpath-jarfiles">classpath-jarfiles</a></li><li><a href="pallet.utils.html#var-classpath-urls">classpath-urls</a></li><li><a href="pallet.utils.html#var-compare-and-swap%21">compare-and-swap!</a></li><li><a href="pallet.utils.html#var-compiler-exception">compiler-exception</a></li><li><a href="pallet.utils.html#var-default-private-key-path">default-private-key-path</a></li><li><a href="pallet.utils.html#var-default-public-key-path">default-public-key-path</a></li><li><a href="pallet.utils.html#var-dissoc-if-empty">dissoc-if-empty</a></li><li><a href="pallet.utils.html#var-dissoc-keys">dissoc-keys</a></li><li><a href="pallet.utils.html#var-file-for-url">file-for-url</a></li><li><a href="pallet.utils.html#var-find-var-with-require">find-var-with-require</a></li><li><a href="pallet.utils.html#var-forward-to-script-lib">forward-to-script-lib</a></li><li><a href="pallet.utils.html#var-jar-file%3F">jar-file?</a></li><li><a href="pallet.utils.html#var-macro-compiler-exception">macro-compiler-exception</a></li><li><a href="pallet.utils.html#var-make-user">make-user</a></li><li><a href="pallet.utils.html#var-map-with-keys-as-symbols">map-with-keys-as-symbols</a></li><li><a href="pallet.utils.html#var-maybe-update-in">maybe-update-in</a></li><li><a href="pallet.utils.html#var-middleware">middleware</a></li><li><a href="pallet.utils.html#var-pipe">pipe</a></li><li><a href="pallet.utils.html#var-pprint-lines">pprint-lines</a></li><li><a href="pallet.utils.html#var-quoted">quoted</a></li><li><a href="pallet.utils.html#var-resource-properties">resource-properties</a></li><li><a href="pallet.utils.html#var-slurp-as-byte-array">slurp-as-byte-array</a></li><li><a href="pallet.utils.html#var-tmpdir">tmpdir</a></li><li><a href="pallet.utils.html#var-tmpfile">tmpfile</a></li><li><a href="pallet.utils.html#var-with-temp-file">with-temp-file</a></li><li><a href="pallet.utils.html#var-with-temporary">with-temporary</a></li></ul></div><div class="namespace-docs" id="content"><h2>pallet.utils documentation</h2><pre class="doc">Utilities used across pallet.
</pre><div class="public" id="var-*admin-user*"><h3>*admin-user*</h3><div class="usage"></div><pre class="doc">The admin user is used for running remote admin commands that require
root permissions.  The default admin user is taken from the
pallet.admin.username property.  If not specified then the user.name property
is used. The admin user can also be specified in config.clj when running
tasks from the command line.</pre></div><div class="public" id="var-as-string"><h3>as-string</h3><div class="usage"><code>(as-string arg)</code></div><pre class="doc">Return the string value of the argument.
</pre></div><div class="public" id="var-base64-md5"><h3>base64-md5</h3><div class="usage"><code>(base64-md5 unsafe-id)</code></div><pre class="doc">Computes the base64 encoding of the md5 of a string
</pre></div><div class="public" id="var-classpath"><h3>classpath</h3><div class="usage"><code>(classpath)</code></div><pre class="doc">Return the classpath File's for the current clojure classloader.
</pre></div><div class="public" id="var-classpath-jarfiles"><h3>classpath-jarfiles</h3><div class="usage"><code>(classpath-jarfiles)</code></div><pre class="doc">Returns a sequence of JarFile objects for the JAR files on classpath.
</pre></div><div class="public" id="var-classpath-urls"><h3>classpath-urls</h3><div class="usage"><code>(classpath-urls)</code></div><pre class="doc">Return the classpath URL's for the current clojure classloader.
</pre></div><div class="public" id="var-compare-and-swap%21"><h3>compare-and-swap!</h3><div class="usage"><code>(compare-and-swap! a f &amp; args)</code></div><pre class="doc">Compare and swap, returning old and new values
</pre></div><div class="public" id="var-compiler-exception"><h3>compiler-exception</h3><div class="usage"><code>(compiler-exception exception)</code></div><pre class="doc">Create a compiler exception that wraps a cause and includes source location.
</pre></div><div class="public" id="var-default-private-key-path"><h3>default-private-key-path</h3><div class="usage"><code>(default-private-key-path)</code></div><pre class="doc">Return the default private key path.
</pre></div><div class="public" id="var-default-public-key-path"><h3>default-public-key-path</h3><div class="usage"><code>(default-public-key-path)</code></div><pre class="doc">Return the default public key path
</pre></div><div class="public" id="var-dissoc-if-empty"><h3>dissoc-if-empty</h3><div class="usage"><code>(dissoc-if-empty m key)</code></div><pre class="doc">Like clojure.core/dissoc, except it only dissoc's if the value at the
keyword is nil.</pre></div><div class="public" id="var-dissoc-keys"><h3>dissoc-keys</h3><div class="usage"><code>(dissoc-keys m keys)</code></div><pre class="doc">Like clojure.core/dissoc, except it takes a vector of keys to remove
</pre></div><div class="public" id="var-file-for-url"><h3>file-for-url</h3><div class="usage"><code>(file-for-url url)</code></div><pre class="doc">Convert a URL to a File. 
</pre></div><div class="public" id="var-find-var-with-require"><h3>find-var-with-require</h3><div class="usage"><code>(find-var-with-require sym)</code><code>(find-var-with-require ns sym)</code></div><pre class="doc">Find the var for the given namespace and symbol. If the namespace does
not exist, then it will be required.
    (find-var-with-require 'my.ns 'a-symbol)
    (find-var-with-require 'my.ns/a-symbol)</pre></div><div class="public" id="var-forward-to-script-lib"><h3>forward-to-script-lib</h3><div class="usage"><code>(forward-to-script-lib &amp; symbols)</code></div><pre class="doc">Forward a script to the new script lib
</pre></div><div class="public" id="var-jar-file%3F"><h3>jar-file?</h3><div class="usage"><code>(jar-file? file)</code></div><pre class="doc">Returns true if file is a normal file with a .jar or .JAR extension.
</pre></div><div class="public" id="var-macro-compiler-exception"><h3>macro-compiler-exception</h3><div class="usage"><code>(macro-compiler-exception exception)</code></div><pre class="doc">Create a compiler exception that wraps a cause and includes source location.
</pre></div><div class="public" id="var-make-user"><h3>make-user</h3><div class="usage"><code>(make-user username &amp; {:keys [public-key-path private-key-path passphrase password sudo-password no-sudo], :as options})</code></div><pre class="doc">Creates a User record with the given username and options. Generally used
in conjunction with *admin-user* and pallet.core/with-admin-user, or passed
to `lift` or `converge` as the named :user argument.

Options:
 - :public-key-path (defaults to ~/.ssh/id_rsa.pub)
 - :private-key-path (defaults to ~/.ssh/id_rsa)
 - :passphrase
 - :password
 - :sudo-password (defaults to :password)
 - :no-sudo</pre></div><div class="public" id="var-map-with-keys-as-symbols"><h3>map-with-keys-as-symbols</h3><div class="usage"><code>(map-with-keys-as-symbols m)</code></div><pre class="doc">Produce a map that is the same as m, but with all keys are converted to
symbols.</pre></div><div class="public" id="var-maybe-update-in"><h3>maybe-update-in</h3><div class="usage"><code>(maybe-update-in m [&amp; ks] f &amp; args)</code></div><pre class="doc">'Updates' a value in a nested associative structure, where ks is a
sequence of keys and f is a function that will take the old value
and any supplied args and return the new value, and returns a new
nested structure.  If any levels do not exist, hash-maps will be
created only if the update function returns a non-nil value. If
the update function returns nil, the map is returned unmodified.</pre></div><div class="public" id="var-middleware"><h3>middleware</h3><div class="usage"><code>(middleware &amp; forms)</code></div><pre class="doc">Build a middleware processing pipeline from the specified forms.
The result is a middleware.</pre></div><div class="public" id="var-pipe"><h3>pipe</h3><div class="usage"><code>(pipe &amp; forms)</code></div><pre class="doc">Build a session processing pipeline from the specified forms.
</pre></div><div class="public" id="var-pprint-lines"><h3>pprint-lines</h3><div class="usage"><code>(pprint-lines s)</code></div><pre class="doc">Pretty print a multiline string
</pre></div><div class="public" id="var-quoted"><h3>quoted</h3><div class="usage"><code>(quoted s)</code></div><pre class="doc">Return the string value of the argument in quotes.
</pre></div><div class="public" id="var-resource-properties"><h3>resource-properties</h3><div class="usage"><code>(resource-properties path)</code></div><pre class="doc">Given a resource `path`, load it as a java properties file.
Returns nil if resource not found.</pre></div><div class="public" id="var-slurp-as-byte-array"><h3>slurp-as-byte-array</h3><div class="usage"><code>(slurp-as-byte-array file)</code></div><pre class="doc">Read the given file as a byte array.
</pre></div><div class="public" id="var-tmpdir"><h3>tmpdir</h3><div class="usage"><code>(tmpdir)</code></div><pre class="doc">Create a temporary directory.
</pre></div><div class="public" id="var-tmpfile"><h3>tmpfile</h3><div class="usage"><code>(tmpfile)</code><code>(tmpfile dir)</code></div><pre class="doc">Create a temporary file
</pre></div><div class="public" id="var-with-temp-file"><h3>with-temp-file</h3><div class="usage"><code>(with-temp-file [varname content] &amp; body)</code></div><pre class="doc">Create a block where `varname` is a temporary `File` containing `content`.
</pre></div><div class="public" id="var-with-temporary"><h3>with-temporary</h3><div class="usage"><code>(with-temporary bindings &amp; body)</code></div><pre class="doc">A block scope allowing multiple bindings to expressions.  Each binding will
have the member function `delete` called on it.</pre></div></div></body></html>