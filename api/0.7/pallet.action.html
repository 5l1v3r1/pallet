<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pallet.action documentation</title></head><body><div id="header"><h1><a href="index.html">Pallet 0.7.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li class="current"><a href="pallet.action.html">pallet.action</a></li><li><a href="pallet.action-impl.html">pallet.action-impl</a></li><li><a href="pallet.action-plan.html">pallet.action-plan</a></li><li><a href="pallet.actions.html">pallet.actions</a></li><li><a href="pallet.actions.direct.html">pallet.actions.direct</a></li><li><a href="pallet.actions.direct.conditional.html">pallet.actions.direct.conditional</a></li><li><a href="pallet.actions.direct.directory.html">pallet.actions.direct.directory</a></li><li><a href="pallet.actions.direct.exec-script.html">pallet.actions.direct.exec-script</a></li><li><a href="pallet.actions.direct.file.html">pallet.actions.direct.file</a></li><li><a href="pallet.actions.direct.package.html">pallet.actions.direct.package</a></li><li><a href="pallet.actions.direct.remote-directory.html">pallet.actions.direct.remote-directory</a></li><li><a href="pallet.actions.direct.remote-file.html">pallet.actions.direct.remote-file</a></li><li><a href="pallet.actions.direct.retry.html">pallet.actions.direct.retry</a></li><li><a href="pallet.actions.direct.rsync.html">pallet.actions.direct.rsync</a></li><li><a href="pallet.actions.direct.service.html">pallet.actions.direct.service</a></li><li><a href="pallet.actions.direct.user.html">pallet.actions.direct.user</a></li><li><a href="pallet.actions-impl.html">pallet.actions-impl</a></li><li><a href="pallet.argument.html">pallet.argument</a></li><li><a href="pallet.blobstore.html">pallet.blobstore</a></li><li><a href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li><a href="pallet.blobstore.jclouds.html">pallet.blobstore.jclouds</a></li><li><a href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li><a href="pallet.cache.html">pallet.cache</a></li><li><a href="pallet.cache.impl.html">pallet.cache.impl</a></li><li><a href="pallet.command-line.html">pallet.command-line</a></li><li><a href="pallet.component.html">pallet.component</a></li><li><a href="pallet.compute.html">pallet.compute</a></li><li><a href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li><a href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li><a href="pallet.compute.jclouds.html">pallet.compute.jclouds</a></li><li><a href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li><a href="pallet.compute.mccloud.html">pallet.compute.mccloud</a></li><li><a href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li><a href="pallet.compute.vmfest.html">pallet.compute.vmfest</a></li><li><a href="pallet.config-file.format.html">pallet.config-file.format</a></li><li><a href="pallet.configure.html">pallet.configure</a></li><li><a href="pallet.context.html">pallet.context</a></li><li><a href="pallet.core.html">pallet.core</a></li><li><a href="pallet.crate.automated-admin-user.html">pallet.crate.automated-admin-user</a></li><li><a href="pallet.crate.crontab.html">pallet.crate.crontab</a></li><li><a href="pallet.crate.environment.html">pallet.crate.environment</a></li><li><a href="pallet.crate.etc-default.html">pallet.crate.etc-default</a></li><li><a href="pallet.crate.etc-hosts.html">pallet.crate.etc-hosts</a></li><li><a href="pallet.crate.filesystem.html">pallet.crate.filesystem</a></li><li><a href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li><a href="pallet.crate.package.centos.html">pallet.crate.package.centos</a></li><li><a href="pallet.crate.package.debian-backports.html">pallet.crate.package.debian-backports</a></li><li><a href="pallet.crate.package.epel.html">pallet.crate.package.epel</a></li><li><a href="pallet.crate.package.jpackage.html">pallet.crate.package.jpackage</a></li><li><a href="pallet.crate.package.rpmforge.html">pallet.crate.package.rpmforge</a></li><li><a href="pallet.crate.ssh-key.html">pallet.crate.ssh-key</a></li><li><a href="pallet.crate.sudoers.html">pallet.crate.sudoers</a></li><li><a href="pallet.debug.html">pallet.debug</a></li><li><a href="pallet.echo.execute.html">pallet.echo.execute</a></li><li><a href="pallet.enlive.html">pallet.enlive</a></li><li><a href="pallet.environment.html">pallet.environment</a></li><li><a href="pallet.event.html">pallet.event</a></li><li><a href="pallet.execute.html">pallet.execute</a></li><li><a href="pallet.executors.html">pallet.executors</a></li><li><a href="pallet.futures.html">pallet.futures</a></li><li><a href="pallet.local.execute.html">pallet.local.execute</a></li><li><a href="pallet.main.html">pallet.main</a></li><li><a href="pallet.main-invoker.html">pallet.main-invoker</a></li><li><a href="pallet.map-merge.html">pallet.map-merge</a></li><li><a href="pallet.maven.html">pallet.maven</a></li><li><a href="pallet.md5crypt.html">pallet.md5crypt</a></li><li><a href="pallet.monad.html">pallet.monad</a></li><li><a href="pallet.monad.state-accessors.html">pallet.monad.state-accessors</a></li><li><a href="pallet.node.html">pallet.node</a></li><li><a href="pallet.node-value.html">pallet.node-value</a></li><li><a href="pallet.parameter.html">pallet.parameter</a></li><li><a href="pallet.phase.html">pallet.phase</a></li><li><a href="pallet.plugin.html">pallet.plugin</a></li><li><a href="pallet.repl.html">pallet.repl</a></li><li><a href="pallet.request-map.html">pallet.request-map</a></li><li><a href="pallet.script.lib.html">pallet.script.lib</a></li><li><a href="pallet.script-builder.html">pallet.script-builder</a></li><li><a href="pallet.script-exec.html">pallet.script-exec</a></li><li><a href="pallet.session.html">pallet.session</a></li><li><a href="pallet.session-verify.html">pallet.session-verify</a></li><li><a href="pallet.shell.html">pallet.shell</a></li><li><a href="pallet.ssh.execute.html">pallet.ssh.execute</a></li><li><a href="pallet.strint.html">pallet.strint</a></li><li><a href="pallet.target.html">pallet.target</a></li><li><a href="pallet.task.add-service.html">pallet.task.add-service</a></li><li><a href="pallet.task.containers.html">pallet.task.containers</a></li><li><a href="pallet.task.converge.html">pallet.task.converge</a></li><li><a href="pallet.task.converge-cluster.html">pallet.task.converge-cluster</a></li><li><a href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li><a href="pallet.task.destroy-cluster.html">pallet.task.destroy-cluster</a></li><li><a href="pallet.task.help.html">pallet.task.help</a></li><li><a href="pallet.task.images.html">pallet.task.images</a></li><li><a href="pallet.task.lift.html">pallet.task.lift</a></li><li><a href="pallet.task.new-project.html">pallet.task.new-project</a></li><li><a href="pallet.task.nodes.html">pallet.task.nodes</a></li><li><a href="pallet.task.providers.html">pallet.task.providers</a></li><li><a href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li><a href="pallet.task.version.html">pallet.task.version</a></li><li><a href="pallet.task.vmfest-script.html">pallet.task.vmfest-script</a></li><li><a href="pallet.template.html">pallet.template</a></li><li><a href="pallet.template.properties.html">pallet.template.properties</a></li><li><a href="pallet.utils.html">pallet.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="pallet.action.html#var-action-fn">action-fn</a></li><li><a href="pallet.action.html#var-assoc-session-precedence">assoc-session-precedence</a></li><li><a href="pallet.action.html#var-declare-action">declare-action</a></li><li><a href="pallet.action.html#var-declare-aggregated-crate-action">declare-aggregated-crate-action</a></li><li><a href="pallet.action.html#var-declare-delayed-crate-action">declare-delayed-crate-action</a></li><li><a href="pallet.action.html#var-defaction">defaction</a></li><li><a href="pallet.action.html#var-get-session-precedence">get-session-precedence</a></li><li><a href="pallet.action.html#var-implement-action">implement-action</a></li><li><a href="pallet.action.html#var-implement-action*">implement-action*</a></li><li><a href="pallet.action.html#var-implementation">implementation</a></li><li><a href="pallet.action.html#var-session-precedence">session-precedence</a></li><li><a href="pallet.action.html#var-update-session-precedence">update-session-precedence</a></li><li><a href="pallet.action.html#var-with-precedence">with-precedence</a></li></ul></div><div class="namespace-docs" id="content"><h2>pallet.action documentation</h2><pre class="doc">Actions are the primitives that are called by crate functions.

Actions can have multiple implementations, but by default most are
implemented as script to be executed on the remote node.

An action has an :execution, which is one of :aggregated, :in-sequence,
:collected, :delayed-crate-fn or :aggregated-crate-fn.

Calls to :aggregated actions will be grouped, and run before
:in-sequence actions. Calls to :collected actions will be grouped, and run
after :in-sequence actions.

Calls to :delayed-crate-fn and :aggregated-crate-fn actions are evaluated
at action plan translation time, which provides a mechanism for calling
crate functions after all other crate functions have been called.</pre><div class="public" id="var-action-fn"><h3>action-fn</h3><div class="usage"><code>(action-fn action-inserter dispatch-val)</code></div><pre class="doc">Returns the function for an implementation of an action from an action
inserter.</pre></div><div class="public" id="var-assoc-session-precedence"><h3>assoc-session-precedence</h3><div class="usage"><code>(assoc-session-precedence m)</code></div><pre class="doc">Set precedence modifiers defined on the session.
</pre></div><div class="public" id="var-declare-action"><h3>declare-action</h3><div class="usage"><code>(declare-action action-symbol metadata)</code></div><pre class="doc">Declare an action. The action-name is a symbol (not necessarily referring to
a Var).

 The execution model can be specified using the :execution key in `metadata`,
 with one of the following possible values:

 :in-sequence - The generated action will be applied to the node
      &quot;in order&quot;, as it is defined lexically in the source crate.
      This is the default.
 :aggregated - All aggregated actions are applied to the node
      in the order they are defined, but before all :in-sequence
      actions. Note that all of the arguments to any given
      action function are gathered such that there is only ever one
      invocation of each fn within each phase.
 :collected - All collected actions are applied to the node
      in the order they are defined, but after all :in-sequence
      action. Note that all of the arguments to any given
      action function are gathered such that there is only ever one
      invocation of each fn within each phase.
 :delayed-crate-fn - delayed crate functions are phase functions that
      are executed at action-plan translation time.
 :aggregated-crate-fn - aggregate crate functions are phase functions that are
      executed at action-plan translation time, with aggregated arguments, as
      for :aggregated.</pre></div><div class="public" id="var-declare-aggregated-crate-action"><h3>declare-aggregated-crate-action</h3><div class="usage"><code>(declare-aggregated-crate-action sym f)</code></div><pre class="doc">Declare an action for an aggregated crate function. A delayed crate function
becomes an action with a single, :default, implementation.</pre></div><div class="public" id="var-declare-delayed-crate-action"><h3>declare-delayed-crate-action</h3><div class="usage"><code>(declare-delayed-crate-action sym f)</code></div><pre class="doc">Declare an action for a delayed crate function. A delayed crate function
becomes an action with a single, :default, implementation.</pre></div><div class="public" id="var-defaction"><h3>defaction</h3><div class="usage"><code>(defaction action-name attr-map? [params*])</code></div><pre class="doc">Declares a named action.
</pre></div><div class="public" id="var-get-session-precedence"><h3>get-session-precedence</h3><div class="usage"><code>(get-session-precedence session)</code></div><pre class="doc">Return any precedence modifiers defined on the session.
</pre></div><div class="public" id="var-implement-action"><h3>implement-action</h3><div class="usage"><code>(implement-action action-name dispatch-val attr-map? [params*])</code></div><pre class="doc">Define an implementation of an action. The dispatch-val is used to dispatch
on.</pre></div><div class="public" id="var-implement-action*"><h3>implement-action*</h3><div class="usage"><code>(implement-action* action-inserter dispatch-val metadata f)</code></div><pre class="doc">Define an implementation of an action given the `action-inserter` function.
</pre></div><div class="public" id="var-implementation"><h3>implementation</h3><div class="usage"><code>(implementation {:keys [action], :as action-map} dispatch-val)</code></div><pre class="doc">Returns the metadata and function for an implementation of an action from an
action map.</pre></div><div class="public" id="var-session-precedence"><h3>session-precedence</h3><div class="usage"><code>(session-precedence session)</code></div><pre class="doc">Return any precedence modifiers defined on the session.
</pre></div><div class="public" id="var-update-session-precedence"><h3>update-session-precedence</h3><div class="usage"><code>(update-session-precedence m)</code></div><pre class="doc">Update any precedence modifiers defined on the session
</pre></div><div class="public" id="var-with-precedence"><h3>with-precedence</h3><div class="usage"><code>(with-precedence m &amp; body)</code></div><pre class="doc">Set up local precedence relations between actions
</pre></div></div></body></html>