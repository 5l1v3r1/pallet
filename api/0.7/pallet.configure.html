<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pallet.configure documentation</title></head><body><div id="header"><h1><a href="index.html">Pallet 0.7.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="pallet.action.html">pallet.action</a></li><li><a href="pallet.action-impl.html">pallet.action-impl</a></li><li><a href="pallet.action-plan.html">pallet.action-plan</a></li><li><a href="pallet.actions.html">pallet.actions</a></li><li><a href="pallet.actions.direct.html">pallet.actions.direct</a></li><li><a href="pallet.actions.direct.conditional.html">pallet.actions.direct.conditional</a></li><li><a href="pallet.actions.direct.directory.html">pallet.actions.direct.directory</a></li><li><a href="pallet.actions.direct.exec-script.html">pallet.actions.direct.exec-script</a></li><li><a href="pallet.actions.direct.file.html">pallet.actions.direct.file</a></li><li><a href="pallet.actions.direct.package.html">pallet.actions.direct.package</a></li><li><a href="pallet.actions.direct.remote-directory.html">pallet.actions.direct.remote-directory</a></li><li><a href="pallet.actions.direct.remote-file.html">pallet.actions.direct.remote-file</a></li><li><a href="pallet.actions.direct.retry.html">pallet.actions.direct.retry</a></li><li><a href="pallet.actions.direct.rsync.html">pallet.actions.direct.rsync</a></li><li><a href="pallet.actions.direct.service.html">pallet.actions.direct.service</a></li><li><a href="pallet.actions.direct.user.html">pallet.actions.direct.user</a></li><li><a href="pallet.actions-impl.html">pallet.actions-impl</a></li><li><a href="pallet.argument.html">pallet.argument</a></li><li><a href="pallet.blobstore.html">pallet.blobstore</a></li><li><a href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li><a href="pallet.blobstore.jclouds.html">pallet.blobstore.jclouds</a></li><li><a href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li><a href="pallet.cache.html">pallet.cache</a></li><li><a href="pallet.cache.impl.html">pallet.cache.impl</a></li><li><a href="pallet.command-line.html">pallet.command-line</a></li><li><a href="pallet.component.html">pallet.component</a></li><li><a href="pallet.compute.html">pallet.compute</a></li><li><a href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li><a href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li><a href="pallet.compute.jclouds.html">pallet.compute.jclouds</a></li><li><a href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li><a href="pallet.compute.mccloud.html">pallet.compute.mccloud</a></li><li><a href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li><a href="pallet.compute.vmfest.html">pallet.compute.vmfest</a></li><li><a href="pallet.config-file.format.html">pallet.config-file.format</a></li><li class="current"><a href="pallet.configure.html">pallet.configure</a></li><li><a href="pallet.context.html">pallet.context</a></li><li><a href="pallet.core.html">pallet.core</a></li><li><a href="pallet.crate.automated-admin-user.html">pallet.crate.automated-admin-user</a></li><li><a href="pallet.crate.crontab.html">pallet.crate.crontab</a></li><li><a href="pallet.crate.environment.html">pallet.crate.environment</a></li><li><a href="pallet.crate.etc-default.html">pallet.crate.etc-default</a></li><li><a href="pallet.crate.etc-hosts.html">pallet.crate.etc-hosts</a></li><li><a href="pallet.crate.filesystem.html">pallet.crate.filesystem</a></li><li><a href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li><a href="pallet.crate.package.centos.html">pallet.crate.package.centos</a></li><li><a href="pallet.crate.package.debian-backports.html">pallet.crate.package.debian-backports</a></li><li><a href="pallet.crate.package.epel.html">pallet.crate.package.epel</a></li><li><a href="pallet.crate.package.jpackage.html">pallet.crate.package.jpackage</a></li><li><a href="pallet.crate.package.rpmforge.html">pallet.crate.package.rpmforge</a></li><li><a href="pallet.crate.ssh-key.html">pallet.crate.ssh-key</a></li><li><a href="pallet.crate.sudoers.html">pallet.crate.sudoers</a></li><li><a href="pallet.debug.html">pallet.debug</a></li><li><a href="pallet.echo.execute.html">pallet.echo.execute</a></li><li><a href="pallet.enlive.html">pallet.enlive</a></li><li><a href="pallet.environment.html">pallet.environment</a></li><li><a href="pallet.event.html">pallet.event</a></li><li><a href="pallet.execute.html">pallet.execute</a></li><li><a href="pallet.executors.html">pallet.executors</a></li><li><a href="pallet.futures.html">pallet.futures</a></li><li><a href="pallet.local.execute.html">pallet.local.execute</a></li><li><a href="pallet.main.html">pallet.main</a></li><li><a href="pallet.main-invoker.html">pallet.main-invoker</a></li><li><a href="pallet.map-merge.html">pallet.map-merge</a></li><li><a href="pallet.maven.html">pallet.maven</a></li><li><a href="pallet.md5crypt.html">pallet.md5crypt</a></li><li><a href="pallet.monad.html">pallet.monad</a></li><li><a href="pallet.monad.state-accessors.html">pallet.monad.state-accessors</a></li><li><a href="pallet.node.html">pallet.node</a></li><li><a href="pallet.node-value.html">pallet.node-value</a></li><li><a href="pallet.parameter.html">pallet.parameter</a></li><li><a href="pallet.phase.html">pallet.phase</a></li><li><a href="pallet.plugin.html">pallet.plugin</a></li><li><a href="pallet.repl.html">pallet.repl</a></li><li><a href="pallet.request-map.html">pallet.request-map</a></li><li><a href="pallet.script.lib.html">pallet.script.lib</a></li><li><a href="pallet.script-builder.html">pallet.script-builder</a></li><li><a href="pallet.script-exec.html">pallet.script-exec</a></li><li><a href="pallet.session.html">pallet.session</a></li><li><a href="pallet.session-verify.html">pallet.session-verify</a></li><li><a href="pallet.shell.html">pallet.shell</a></li><li><a href="pallet.ssh.execute.html">pallet.ssh.execute</a></li><li><a href="pallet.strint.html">pallet.strint</a></li><li><a href="pallet.target.html">pallet.target</a></li><li><a href="pallet.task.add-service.html">pallet.task.add-service</a></li><li><a href="pallet.task.containers.html">pallet.task.containers</a></li><li><a href="pallet.task.converge.html">pallet.task.converge</a></li><li><a href="pallet.task.converge-cluster.html">pallet.task.converge-cluster</a></li><li><a href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li><a href="pallet.task.destroy-cluster.html">pallet.task.destroy-cluster</a></li><li><a href="pallet.task.help.html">pallet.task.help</a></li><li><a href="pallet.task.images.html">pallet.task.images</a></li><li><a href="pallet.task.lift.html">pallet.task.lift</a></li><li><a href="pallet.task.new-project.html">pallet.task.new-project</a></li><li><a href="pallet.task.nodes.html">pallet.task.nodes</a></li><li><a href="pallet.task.providers.html">pallet.task.providers</a></li><li><a href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li><a href="pallet.task.version.html">pallet.task.version</a></li><li><a href="pallet.task.vmfest-script.html">pallet.task.vmfest-script</a></li><li><a href="pallet.template.html">pallet.template</a></li><li><a href="pallet.template.properties.html">pallet.template.properties</a></li><li><a href="pallet.utils.html">pallet.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="pallet.configure.html#var-admin-user">admin-user</a></li><li><a href="pallet.configure.html#var-admin-user-from-config">admin-user-from-config</a></li><li><a href="pallet.configure.html#var-admin-user-from-config-file">admin-user-from-config-file</a></li><li><a href="pallet.configure.html#var-admin-user-from-config-var">admin-user-from-config-var</a></li><li><a href="pallet.configure.html#var-admin-user-from-property">admin-user-from-property</a></li><li><a href="pallet.configure.html#var-blobstore-from-config">blobstore-from-config</a></li><li><a href="pallet.configure.html#var-blobstore-from-map">blobstore-from-map</a></li><li><a href="pallet.configure.html#var-blobstore-from-settings">blobstore-from-settings</a></li><li><a href="pallet.configure.html#var-blobstore-lookup">blobstore-lookup</a></li><li><a href="pallet.configure.html#var-blobstore-service">blobstore-service</a></li><li><a href="pallet.configure.html#var-blobstore-service-from-config-file">blobstore-service-from-config-file</a></li><li><a href="pallet.configure.html#var-blobstore-service-from-config-var">blobstore-service-from-config-var</a></li><li><a href="pallet.configure.html#var-blobstore-service-from-property">blobstore-service-from-property</a></li><li><a href="pallet.configure.html#var-compute-service">compute-service</a></li><li><a href="pallet.configure.html#var-compute-service-from-config">compute-service-from-config</a></li><li><a href="pallet.configure.html#var-compute-service-from-config-file">compute-service-from-config-file</a></li><li><a href="pallet.configure.html#var-compute-service-from-config-var">compute-service-from-config-var</a></li><li><a href="pallet.configure.html#var-compute-service-from-map">compute-service-from-map</a></li><li><a href="pallet.configure.html#var-compute-service-from-property">compute-service-from-property</a></li><li><a href="pallet.configure.html#var-compute-service-from-settings">compute-service-from-settings</a></li><li><a href="pallet.configure.html#var-compute-service-properties">compute-service-properties</a></li><li><a href="pallet.configure.html#var-defpallet">defpallet</a></li><li><a href="pallet.configure.html#var-pallet-config">pallet-config</a></li><li><a href="pallet.configure.html#var-service-map">service-map</a></li></ul></div><div class="namespace-docs" id="content"><h2>pallet.configure documentation</h2><pre class="doc">Pallet configuration using ~/.pallet/config.clj, the pallet.config namespace
or from settings.xml.

config.clj should be in ~/.pallet or a directory specified by the PALLET_HOME
environment variable.

service definitions can also be specified as clojure maps in
~/.pallet/services/*.clj</pre><div class="public" id="var-admin-user"><h3>admin-user</h3><div class="usage"><code>(admin-user)</code></div><pre class="doc">Instantiate an admin-user.

If passed no arguments, then the blobstore service is looked up in the
following order:
- from a var referenced by pallet.config.admin-user system property
- from pallet.config/admin-user if defined
- the :admin-user top level key in config.clj

Service specific admin-user values should be specified through a :user
key on the :environment for the service.

The other arguments are keyword value pairs.
- :identity     username or key
- :credential   password or secret
- :extensions   extension modules for jclouds
- :node-list    a list of nodes for the &quot;node-list&quot; provider.
- :environment  an environment map with service specific values.</pre></div><div class="public" id="var-admin-user-from-config"><h3>admin-user-from-config</h3><div class="usage"><code>(admin-user-from-config config)</code></div><pre class="doc">Set the admin user based on a config map
</pre></div><div class="public" id="var-admin-user-from-config-file"><h3>admin-user-from-config-file</h3><div class="usage"><code>(admin-user-from-config-file)</code></div><pre class="doc">Create an admin user form a configuration map.
</pre></div><div class="public" id="var-admin-user-from-config-var"><h3>admin-user-from-config-var</h3><div class="usage"><code>(admin-user-from-config-var)</code></div><pre class="doc">Set the admin user based on pallet.config setup.
</pre></div><div class="public" id="var-admin-user-from-property"><h3>admin-user-from-property</h3><div class="usage"><code>(admin-user-from-property)</code></div><pre class="doc">If the pallet.config.admin-user property is defined, and refers to a var
then return its value.</pre></div><div class="public" id="var-blobstore-from-config"><h3>blobstore-from-config</h3><div class="usage"><code>(blobstore-from-config config profiles)</code></div><pre class="doc">Create a blobstore service form a configuration map.
</pre></div><div class="public" id="var-blobstore-from-map"><h3>blobstore-from-map</h3><div class="usage"><code>(blobstore-from-map credentials)</code></div><pre class="doc">Create a blobstore service from a credentials map.
Uses :provider, :identity, :credential and
:blobstore-provider, :blobstore-identity and :blobstore-credential.
Blobstore keys fall back to the compute keys</pre></div><div class="public" id="var-blobstore-from-settings"><h3>blobstore-from-settings</h3><div class="usage"><code>(blobstore-from-settings &amp; profiles)</code></div><pre class="doc">Create a blobstore service from ~/.m2/settings.xml propery settings.
</pre></div><div class="public" id="var-blobstore-lookup"><h3>blobstore-lookup</h3><div class="usage"></div><pre class="doc">Translate compute provider to associated blobstore provider
</pre></div><div class="public" id="var-blobstore-service"><h3>blobstore-service</h3><div class="usage"><code>(blobstore-service)</code><code>(blobstore-service service-name)</code><code>(blobstore-service provider-name &amp; {:keys [identity credential extensions node-list endpoint environment], :as options})</code></div><pre class="doc">Instantiate a blobstore service.

If passed no arguments, then the blobstore service is looked up in the
following order:
- from a var referenced by pallet.config.blobstore-service system property
- from pallet.config/blobstore-service if defined
- the first service in config.clj
- the service from the first active profile in settings.xml

If passed a service name, it is looked up in external
configuration (~/.pallet/config.clj or ~/.m2/settings.xml). A service name is
one of the keys in the :services map in config.clj, or a profile id in
settings.xml.

When passed a provider name and credentials, the service is instantiated
based on the credentials.  The provider name should be a recognised provider
name (see `pallet.blobstore/supported-providers` to obtain a list of these).

The other arguments are keyword value pairs.
- :identity     username or key
- :credential   password or secret
- :extensions   extension modules for jclouds
- :node-list    a list of nodes for the &quot;node-list&quot; provider.
- :environment  an environment map with service specific values.</pre></div><div class="public" id="var-blobstore-service-from-config-file"><h3>blobstore-service-from-config-file</h3><div class="usage"><code>(blobstore-service-from-config-file &amp; profiles)</code></div><pre class="doc">Create a blobstore service form a configuration map.
</pre></div><div class="public" id="var-blobstore-service-from-config-var"><h3>blobstore-service-from-config-var</h3><div class="usage"><code>(blobstore-service-from-config-var)</code></div><pre class="doc">Checks to see if pallet.config/service is a var, and if so returns its
value.</pre></div><div class="public" id="var-blobstore-service-from-property"><h3>blobstore-service-from-property</h3><div class="usage"><code>(blobstore-service-from-property)</code></div><pre class="doc">If the pallet.config.service property is defined, and refers to a var, then
return its value.</pre></div><div class="public" id="var-compute-service"><h3>compute-service</h3><div class="usage"><code>(compute-service)</code><code>(compute-service service-name)</code><code>(compute-service provider-name &amp; {:keys [identity credential extensions node-list endpoint environment], :as options})</code></div><pre class="doc">Instantiate a compute service.

If passed no arguments, then the compute service is looked up in the
following order:
- from a var referenced by the pallet.config.service system property
- from pallet.config/service if defined
- the first service in config.clj
- the service from the first active profile in settings.xml

If passed a service name, it is looked up in external
configuration (~/.pallet/config.clj or ~/.m2/settings.xml). A service name is
one of the keys in the :services map in config.clj, or a profile id in
settings.xml.

When passed a provider name and credentials, the service is instantiated
based on the credentials.  The provider name should be a recognised provider
name (see `pallet.compute/supported-providers` to obtain a list of these).

The other arguments are keyword value pairs.
- :identity     username or key
- :credential   password or secret
- :extensions   extension modules for jclouds
- :node-list    a list of nodes for the &quot;node-list&quot; provider.
- :environment  an environment map with service specific values.</pre></div><div class="public" id="var-compute-service-from-config"><h3>compute-service-from-config</h3><div class="usage"><code>(compute-service-from-config config profiles)</code></div><pre class="doc">Compute service from a defpallet configuration map and a list of active
profiles (provider keys).</pre></div><div class="public" id="var-compute-service-from-config-file"><h3>compute-service-from-config-file</h3><div class="usage"><code>(compute-service-from-config-file &amp; profiles)</code></div><pre class="doc">Compute service from ~/.pallet/config.clj. Profiles is a sequence of service
keys to use from the :services map.</pre></div><div class="public" id="var-compute-service-from-config-var"><h3>compute-service-from-config-var</h3><div class="usage"><code>(compute-service-from-config-var)</code></div><pre class="doc">Checks to see if pallet.config/service is a var, and if so returns its
value.</pre></div><div class="public" id="var-compute-service-from-map"><h3>compute-service-from-map</h3><div class="usage"><code>(compute-service-from-map credentials)</code></div><pre class="doc">Create a compute service from a credentials map.
Uses the :provider, :identity, :credential, :extensions and :node-list keys.
The :extensions and :node-list keys will be read with read-string if they
are strings.</pre></div><div class="public" id="var-compute-service-from-property"><h3>compute-service-from-property</h3><div class="usage"><code>(compute-service-from-property)</code></div><pre class="doc">If the pallet.config.service property is defined, and refers to a var, then
return its value.</pre></div><div class="public" id="var-compute-service-from-settings"><h3>compute-service-from-settings</h3><div class="usage"><code>(compute-service-from-settings &amp; profiles)</code></div><pre class="doc">Create a compute service from maven property settings.
In Maven's settings.xml you can define a profile, that contains
pallet.compute.provider, pallet.compute.identity and
pallet.compute.credential values.</pre></div><div class="public" id="var-compute-service-properties"><h3>compute-service-properties</h3><div class="usage"><code>(compute-service-properties config profiles)</code></div><pre class="doc">Helper to read compute service properties. Given a config file return the
selected service definition as a map.</pre></div><div class="public" id="var-defpallet"><h3>defpallet</h3><div class="usage"><code>(defpallet &amp; {:keys [provider identity credential providers admin-user], :as config-options})</code></div><pre class="doc">Top level macro for the pallet config.clj file.
</pre></div><div class="public" id="var-pallet-config"><h3>pallet-config</h3><div class="usage"><code>(pallet-config)</code></div><pre class="doc">Read pallet configuration from config.clj and services/*.clj files. The
files are taken from ~/.pallet or $PALLET_HOME if set.</pre></div><div class="public" id="var-service-map"><h3>service-map</h3><div class="usage"><code>(service-map)</code><code>(service-map service-name)</code></div><pre class="doc">Instantiate service objects. The service objects are returned in a map
with keys as expected by `configure` or `lift`.</pre></div></div></body></html>