<html lang="en">
  <head>
    <title>pallet.monad.state-monad documentation</title>
    <link href="css/default.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/page_effects.js"></script>
  </head>
  <body>
    <header>
      <div id="header">
        <h1 class="project-title">Pallet 0.8 API documentation</h1>
      </div>
    </header>
    <navigation>
      <div id="namespaces" class="sidebar">
        <h3>Namespaces</h3>
        <ul class="ns-links">
          <li class="ns-link"><a href="pallet.action.html">pallet.action</a></li><li class="ns-link"><a href="pallet.action-impl.html">pallet.action-impl</a></li><li class="ns-link"><a href="pallet.action-plan.html">pallet.action-plan</a></li><li class="ns-link"><a href="pallet.actions.html">pallet.actions</a></li><li class="ns-link"><a href="pallet.actions.direct.html">pallet.actions.direct</a></li><li class="ns-link"><a href="pallet.actions.direct.conditional.html">pallet.actions.direct.conditional</a></li><li class="ns-link"><a href="pallet.actions.direct.directory.html">pallet.actions.direct.directory</a></li><li class="ns-link"><a href="pallet.actions.direct.exec-script.html">pallet.actions.direct.exec-script</a></li><li class="ns-link"><a href="pallet.actions.direct.file.html">pallet.actions.direct.file</a></li><li class="ns-link"><a href="pallet.actions.direct.package.html">pallet.actions.direct.package</a></li><li class="ns-link"><a href="pallet.actions.direct.remote-directory.html">pallet.actions.direct.remote-directory</a></li><li class="ns-link"><a href="pallet.actions.direct.remote-file.html">pallet.actions.direct.remote-file</a></li><li class="ns-link"><a href="pallet.actions.direct.retry.html">pallet.actions.direct.retry</a></li><li class="ns-link"><a href="pallet.actions.direct.rsync.html">pallet.actions.direct.rsync</a></li><li class="ns-link"><a href="pallet.actions.direct.service.html">pallet.actions.direct.service</a></li><li class="ns-link"><a href="pallet.actions.direct.settings.html">pallet.actions.direct.settings</a></li><li class="ns-link"><a href="pallet.actions.direct.user.html">pallet.actions.direct.user</a></li><li class="ns-link"><a href="pallet.actions-impl.html">pallet.actions-impl</a></li><li class="ns-link"><a href="pallet.api.html">pallet.api</a></li><li class="ns-link"><a href="pallet.argument.html">pallet.argument</a></li><li class="ns-link"><a href="pallet.blobstore.html">pallet.blobstore</a></li><li class="ns-link"><a href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li class="ns-link"><a href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li class="ns-link"><a href="pallet.cache.html">pallet.cache</a></li><li class="ns-link"><a href="pallet.cache.impl.html">pallet.cache.impl</a></li><li class="ns-link"><a href="pallet.command-line.html">pallet.command-line</a></li><li class="ns-link"><a href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li class="ns-link"><a href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li class="ns-link"><a href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li class="ns-link"><a href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li class="ns-link"><a href="pallet.config-file.format.html">pallet.config-file.format</a></li><li class="ns-link"><a href="pallet.configure.html">pallet.configure</a></li><li class="ns-link"><a href="pallet.context.html">pallet.context</a></li><li class="ns-link"><a href="pallet.core.html">pallet.core</a></li><li class="ns-link"><a href="pallet.core.api.html">pallet.core.api</a></li><li class="ns-link"><a href="pallet.core.api-impl.html">pallet.core.api-impl</a></li><li class="ns-link"><a href="pallet.core.operations.html">pallet.core.operations</a></li><li class="ns-link"><a href="pallet.core.plan-state.html">pallet.core.plan-state</a></li><li class="ns-link"><a href="pallet.core.primitives.html">pallet.core.primitives</a></li><li class="ns-link"><a href="pallet.core.session.html">pallet.core.session</a></li><li class="ns-link"><a href="pallet.core.user.html">pallet.core.user</a></li><li class="ns-link"><a href="pallet.crate.html">pallet.crate</a></li><li class="ns-link"><a href="pallet.crate.automated-admin-user.html">pallet.crate.automated-admin-user</a></li><li class="ns-link"><a href="pallet.crate.crontab.html">pallet.crate.crontab</a></li><li class="ns-link"><a href="pallet.crate.environment.html">pallet.crate.environment</a></li><li class="ns-link"><a href="pallet.crate.etc-default.html">pallet.crate.etc-default</a></li><li class="ns-link"><a href="pallet.crate.etc-hosts.html">pallet.crate.etc-hosts</a></li><li class="ns-link"><a href="pallet.crate.filesystem.html">pallet.crate.filesystem</a></li><li class="ns-link"><a href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li class="ns-link"><a href="pallet.crate.package.centos.html">pallet.crate.package.centos</a></li><li class="ns-link"><a href="pallet.crate.package.debian-backports.html">pallet.crate.package.debian-backports</a></li><li class="ns-link"><a href="pallet.crate.package.epel.html">pallet.crate.package.epel</a></li><li class="ns-link"><a href="pallet.crate.package.jpackage.html">pallet.crate.package.jpackage</a></li><li class="ns-link"><a href="pallet.crate.package.rpmforge.html">pallet.crate.package.rpmforge</a></li><li class="ns-link"><a href="pallet.crate.package-repo.html">pallet.crate.package-repo</a></li><li class="ns-link"><a href="pallet.crate.ssh-key.html">pallet.crate.ssh-key</a></li><li class="ns-link"><a href="pallet.crate.sudoers.html">pallet.crate.sudoers</a></li><li class="ns-link"><a href="pallet.crate-install.html">pallet.crate-install</a></li><li class="ns-link"><a href="pallet.debug.html">pallet.debug</a></li><li class="ns-link"><a href="pallet.echo.execute.html">pallet.echo.execute</a></li><li class="ns-link"><a href="pallet.enlive.html">pallet.enlive</a></li><li class="ns-link"><a href="pallet.environment.html">pallet.environment</a></li><li class="ns-link"><a href="pallet.event.html">pallet.event</a></li><li class="ns-link"><a href="pallet.execute.html">pallet.execute</a></li><li class="ns-link"><a href="pallet.executors.html">pallet.executors</a></li><li class="ns-link"><a href="pallet.feature.html">pallet.feature</a></li><li class="ns-link"><a href="pallet.futures.html">pallet.futures</a></li><li class="ns-link"><a href="pallet.local.execute.html">pallet.local.execute</a></li><li class="ns-link"><a href="pallet.main.html">pallet.main</a></li><li class="ns-link"><a href="pallet.main-invoker.html">pallet.main-invoker</a></li><li class="ns-link"><a href="pallet.md5crypt.html">pallet.md5crypt</a></li><li class="ns-link"><a href="pallet.monad.html">pallet.monad</a></li><li class="ns-link"><a href="pallet.monad.state-accessors.html">pallet.monad.state-accessors</a></li><li class="ns-link"><a href="pallet.monad.state-monad.html">pallet.monad.state-monad</a></li><li class="ns-link"><a href="pallet.node-value.html">pallet.node-value</a></li><li class="ns-link"><a href="pallet.phase.html">pallet.phase</a></li><li class="ns-link"><a href="pallet.plugin.html">pallet.plugin</a></li><li class="ns-link"><a href="pallet.repl.html">pallet.repl</a></li><li class="ns-link"><a href="pallet.script.lib.html">pallet.script.lib</a></li><li class="ns-link"><a href="pallet.script-builder.html">pallet.script-builder</a></li><li class="ns-link"><a href="pallet.script-exec.html">pallet.script-exec</a></li><li class="ns-link"><a href="pallet.session.action-plan.html">pallet.session.action-plan</a></li><li class="ns-link"><a href="pallet.session.verify.html">pallet.session.verify</a></li><li class="ns-link"><a href="pallet.ssh.execute.html">pallet.ssh.execute</a></li><li class="ns-link"><a href="pallet.strint.html">pallet.strint</a></li><li class="ns-link"><a href="pallet.task.add-service.html">pallet.task.add-service</a></li><li class="ns-link"><a href="pallet.task.config.html">pallet.task.config</a></li><li class="ns-link"><a href="pallet.task.containers.html">pallet.task.containers</a></li><li class="ns-link"><a href="pallet.task.converge.html">pallet.task.converge</a></li><li class="ns-link"><a href="pallet.task.converge-cluster.html">pallet.task.converge-cluster</a></li><li class="ns-link"><a href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li class="ns-link"><a href="pallet.task.destroy-cluster.html">pallet.task.destroy-cluster</a></li><li class="ns-link"><a href="pallet.task.help.html">pallet.task.help</a></li><li class="ns-link"><a href="pallet.task.images.html">pallet.task.images</a></li><li class="ns-link"><a href="pallet.task.new-project.html">pallet.task.new-project</a></li><li class="ns-link"><a href="pallet.task.nodes.html">pallet.task.nodes</a></li><li class="ns-link"><a href="pallet.task.providers.html">pallet.task.providers</a></li><li class="ns-link"><a href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li class="ns-link"><a href="pallet.task.version.html">pallet.task.version</a></li><li class="ns-link"><a href="pallet.template.html">pallet.template</a></li><li class="ns-link"><a href="pallet.template.properties.html">pallet.template.properties</a></li><li class="ns-link"><a href="pallet.utils.html">pallet.utils</a></li><li class="ns-link"><a href="pallet.version-dispatch.html">pallet.version-dispatch</a></li><li class="ns-link"><a href="pallet.versions.html">pallet.versions</a></li>
        </ul>
      </div>
      <div id="vars" class="sidebar">
        <h3>Public Vars</h3>
        <ul class="ns-var-links">
          <li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-check-state-with">check-state-with</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-cond-statement">cond-statement</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-dostate">dostate</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-chain">m-chain</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-fmap">m-fmap</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-join">m-join</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-lift">m-lift</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-map">m-map</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-seq">m-seq</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-when">m-when</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-m-when-not">m-when-not</a></li><li class="ns-var-link"><a href="pallet.monad.state-monad.html#var-state-checker">state-checker</a></li>
        </ul>
      </div>
    </navigation>
    <article>
      <div id="content" class="namespace-docs">
        <h2 class="namespace-title">pallet.monad.state-monad documentation</h2>
        <div class="doc"><p>Provides a state monad implementation, based on clojure.algo.monads.</p>

<p>This aims to solve two problems that occur when using state monads with
clojure.algo.monads.  Firstly stack traces are unusable, since they contain only
bind calls (ie. no identifiable user code).  Secondly they use a lot of stack,
since each expression in a comprehension becomes a nested stack frame.</p>
</div>
        <div class="ns-vars">
          <div class="public">
            <h3 id="var-check-state-with">check-state-with</h3>
            <div class="usage">[f]</div>
            
            
            <div class="doc"><p>Specify a global function that checks the state in some way. This function
will be called at compile time, so can not be modified at run time. The
function can not modify the state used in any way.</p>
</div>
          </div><div class="public">
            <h3 id="var-cond-statement">cond-statement</h3>
            <div class="usage">[expr mexpr continuation]</div>
            
            
            <div class="doc"><p>Process a :cond steps when adding a new monadic step to the mexrp.</p>
</div>
          </div><div class="public">
            <h3 id="var-dostate">dostate</h3>
            <div class="usage">[bindings result]</div>
            
            
            <div class="doc"><p>A comprehension for the state monad</p>
</div>
          </div><div class="public">
            <h3 id="var-m-chain">m-chain</h3>
            <div class="usage">[steps]</div>
            
            
            <div class="doc"><p>Chains together monadic computation steps that are each functions
of one parameter. Each step is called with the result of the previous
step as its argument. (m-chain (step1 step2)) is equivalent to
(fn [x] (domonad [r1 (step1 x) r2 (step2 r1)] r2)).</p>
</div>
          </div><div class="public">
            <h3 id="var-m-fmap">m-fmap</h3>
            <div class="usage">[f m]</div>
            
            
            <div class="doc"><p>Bind the monadic value m to the function returning (f x) for argument x</p>
</div>
          </div><div class="public">
            <h3 id="var-m-join">m-join</h3>
            <div class="usage">[m]</div>
            
            
            <div class="doc"><p>Converts a monadic value containing a monadic value into a 'simple'
monadic value.</p>
</div>
          </div><div class="public">
            <h3 id="var-m-lift">m-lift</h3>
            <div class="usage">[n f]</div>
            
            
            <div class="doc"><p>Converts a function f of n arguments into a function of n
monadic arguments returning a monadic value.</p>
</div>
          </div><div class="public">
            <h3 id="var-m-map">m-map</h3>
            <div class="usage">[f xs]</div>
            
            
            <div class="doc"><p>'Executes' the sequence of monadic values resulting from mapping
f onto the values xs. f must return a monadic value.</p>
</div>
          </div><div class="public">
            <h3 id="var-m-seq">m-seq</h3>
            <div class="usage">[ms]</div>
            
            
            <div class="doc"><p>'Executes' the monadic values in ms and returns a sequence of the
basic values contained in them.</p>
</div>
          </div><div class="public">
            <h3 id="var-m-when">m-when</h3>
            <div class="usage">[test m-expr]</div>
            
            
            <div class="doc"><p>If test is logical true, return monadic value m-expr, else return
(m-result nil).</p>
</div>
          </div><div class="public">
            <h3 id="var-m-when-not">m-when-not</h3>
            <div class="usage">[test m-expr]</div>
            
            
            <div class="doc"><p>If test if logical false, return monadic value m-expr, else return
(m-result nil).</p>
</div>
          </div><div class="public">
            <h3 id="var-state-checker">state-checker</h3>
            
            
            
            <div class="doc"><p>This can be set to a function that is expected to check the state in some
way. The function can not modify the state used in any way.</p>
</div>
          </div>
        </div>
      </div>
    </article>
  </body>

</html>