<html lang="en">
  <head>
    <title>pallet.actions documentation</title>
    <link href="css/default.css" type="text/css" rel="stylesheet" />
    <link href="css/codox-md.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/page_effects.js"></script>
  </head>
  <body>
    <header>
    <div data-scrollspy="scrollspy" class="topbar">
      <div class="topbar-inner">
        <div class="container">
          <a href="/" class="brand">Pallet</a>
          <ul class="nav">
            <li class=""><a href="/doc">Documentation</a></li>
            <li class=""><a href="/news">News</a></li>
            <li class=""><a href="/blog">Blog</a></li>
            <li class=""><a href="https://github.com/pallet/pallet">Code</a></li>
            <li class=""><a href="/services">Services</a></li>
            <li class=""><a href="/support">Support</a></li>
            <li class=""><a href="/contact">Contact</a></li>
          </ul>
          <form action="http://www.google.com/search" method="get" class="pull-right">
            <input placeholder="Search" value="" maxlength="255" name="q" type="text" />
            <input value="palletops.com" type="hidden" name="sitesearch" />
          </form>
        </div>
      </div>
    </div>
      <div id="header">
        <h1><a href="http://palletops.com"><span class="project-title">Pallet 0.8.0-SNAPSHOT API documentation</span></a></h1>
      </div>
    </header>
    <navigation>
      <div id="namespaces" class="sidebar">
        <h3>Namespaces</h3>
        <ul class="ns-links">
          <li class="ns-list"><a class="ns-link ns-name" href="pallet.action.html">pallet.action</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.action-impl.html">pallet.action-impl</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.action-plan.html">pallet.action-plan</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.html">pallet.actions</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.html">pallet.actions.direct</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.conditional.html">pallet.actions.direct.conditional</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.directory.html">pallet.actions.direct.directory</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.exec-script.html">pallet.actions.direct.exec-script</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.file.html">pallet.actions.direct.file</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.package.html">pallet.actions.direct.package</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.remote-directory.html">pallet.actions.direct.remote-directory</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.remote-file.html">pallet.actions.direct.remote-file</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.retry.html">pallet.actions.direct.retry</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.rsync.html">pallet.actions.direct.rsync</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.service.html">pallet.actions.direct.service</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.settings.html">pallet.actions.direct.settings</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions.direct.user.html">pallet.actions.direct.user</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.actions-impl.html">pallet.actions-impl</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.api.html">pallet.api</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.argument.html">pallet.argument</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.blobstore.html">pallet.blobstore</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.blobstore.implementation.html">pallet.blobstore.implementation</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.blobstore.url-blobstore.html">pallet.blobstore.url-blobstore</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.cache.html">pallet.cache</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.cache.impl.html">pallet.cache.impl</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.command-line.html">pallet.command-line</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.compute.html">pallet.compute</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.compute.hybrid.html">pallet.compute.hybrid</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.compute.implementation.html">pallet.compute.implementation</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.compute.jvm.html">pallet.compute.jvm</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.compute.localhost.html">pallet.compute.localhost</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.compute.node-list.html">pallet.compute.node-list</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.config-file.format.html">pallet.config-file.format</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.configure.html">pallet.configure</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.context.html">pallet.context</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.html">pallet.core</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.api.html">pallet.core.api</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.api-impl.html">pallet.core.api-impl</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.operations.html">pallet.core.operations</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.plan-state.html">pallet.core.plan-state</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.primitives.html">pallet.core.primitives</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.session.html">pallet.core.session</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.thread-local.html">pallet.core.thread-local</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.core.user.html">pallet.core.user</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.html">pallet.crate</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.automated-admin-user.html">pallet.crate.automated-admin-user</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.crontab.html">pallet.crate.crontab</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.environment.html">pallet.crate.environment</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.etc-default.html">pallet.crate.etc-default</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.etc-hosts.html">pallet.crate.etc-hosts</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.filesystem.html">pallet.crate.filesystem</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.network-service.html">pallet.crate.network-service</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.package.centos.html">pallet.crate.package.centos</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.package.debian-backports.html">pallet.crate.package.debian-backports</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.package.epel.html">pallet.crate.package.epel</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.package.jpackage.html">pallet.crate.package.jpackage</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.package.rpmforge.html">pallet.crate.package.rpmforge</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.package-repo.html">pallet.crate.package-repo</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.ssh-key.html">pallet.crate.ssh-key</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate.sudoers.html">pallet.crate.sudoers</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.crate-install.html">pallet.crate-install</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.debug.html">pallet.debug</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.echo.execute.html">pallet.echo.execute</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.enlive.html">pallet.enlive</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.environment.html">pallet.environment</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.event.html">pallet.event</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.execute.html">pallet.execute</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.executors.html">pallet.executors</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.feature.html">pallet.feature</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.futures.html">pallet.futures</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.local.execute.html">pallet.local.execute</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.main.html">pallet.main</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.main-invoker.html">pallet.main-invoker</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.md5crypt.html">pallet.md5crypt</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.node.html">pallet.node</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.node-value.html">pallet.node-value</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.phase.html">pallet.phase</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.plugin.html">pallet.plugin</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.project.html">pallet.project</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.project.load.html">pallet.project.load</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.project.loader.html">pallet.project.loader</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.repl.html">pallet.repl</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.script.lib.html">pallet.script.lib</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.script-builder.html">pallet.script-builder</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.script-exec.html">pallet.script-exec</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.session.action-plan.html">pallet.session.action-plan</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.session.verify.html">pallet.session.verify</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.ssh.execute.html">pallet.ssh.execute</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.strint.html">pallet.strint</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.html">pallet.task</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.add-service.html">pallet.task.add-service</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.config.html">pallet.task.config</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.containers.html">pallet.task.containers</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.converge.html">pallet.task.converge</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.describe-node.html">pallet.task.describe-node</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.down.html">pallet.task.down</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.help.html">pallet.task.help</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.images.html">pallet.task.images</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.lift.html">pallet.task.lift</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.nodes.html">pallet.task.nodes</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.project-init.html">pallet.task.project-init</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.providers.html">pallet.task.providers</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.to-blob.html">pallet.task.to-blob</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.up.html">pallet.task.up</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task.version.html">pallet.task.version</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.task-utils.html">pallet.task-utils</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.template.html">pallet.template</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.template.properties.html">pallet.template.properties</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.utils.html">pallet.utils</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.version-dispatch.html">pallet.version-dispatch</a></li><li class="ns-list"><a class="ns-link ns-name" href="pallet.versions.html">pallet.versions</a></li>
        </ul>
      </div>
      <div id="vars" class="sidebar">
        <h3>Public Vars</h3>
        <ul class="ns-var-links">
          <li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-add-rpm">add-rpm</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-all-options">all-options</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-as-action">as-action</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-assoc-settings">assoc-settings</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-content-options">content-options</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-delete-local-path">delete-local-path</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-directories">directories</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-directory">directory</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-exec">exec</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-exec-checked-script">exec-checked-script</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-exec-script">exec-script</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-exec-script*">exec-script*</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-fifo">fifo</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-file">file</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-group">group</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-install-deb">install-deb</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-minimal-packages">minimal-packages</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-on-one-node">on-one-node</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-ownership-options">ownership-options</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-package">package</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-package-manager">package-manager</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-package-source">package-source</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-packages">packages</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-plan-when">plan-when</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-plan-when-not">plan-when-not</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-remote-directory">remote-directory</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-remote-file">remote-file</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-remote-file-content">remote-file-content</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-retry-until">retry-until</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-return-value-expr">return-value-expr</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-rsync">rsync</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-rsync-directory">rsync-directory</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-sed">sed</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-service">service</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-service-script">service-script</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-set-force-overwrite">set-force-overwrite</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-set-install-new-files">set-install-new-files</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-symbolic-link">symbolic-link</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-transfer-file">transfer-file</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-transfer-file-to-local">transfer-file-to-local</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-update-settings">update-settings</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-user">user</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-version-options">version-options</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-with-remote-file">with-remote-file</a></li><li class="ns-var-list"><a class="ns-var-link ns-var-name" href="pallet.actions.html#var-with-service-restart">with-service-restart</a></li>
        </ul>
      </div>
    </navigation>
    <article>
      <div id="content" class="namespace-docs">
        <h2 class="namespace-title">pallet.actions documentation</h2>
        <div class="doc"><p>Pallet's action primitives.</p>
</div>
        <div class="ns-vars">
          <div class="public">
            <h3><a id="var-add-rpm" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L528">add-rpm</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[rpm-name &amp; {:as options}]</div>
            
            
            <div class="doc"><p>Add an rpm.  Source options are as for remote file.</p>
</div>
          </div><div class="public">
            <h3><a id="var-all-options" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L247">all-options</a></h3>
            <h4 class="var-type var" id="var-type">var</h4>
            
            
            
            <div class="doc"><p>A vector of the options accepted by remote-file.  Can be used for
option forwarding when calling remote-file from other crates.</p>
</div>
          </div><div class="public">
            <h3><a id="var-as-action" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L52">as-action</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[&amp; body]</div>
            
            
            <div class="doc"><p>Wrap arbitrary clojure code to be run as an action</p>
</div>
          </div><div class="public">
            <h3><a id="var-assoc-settings" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L138">assoc-settings</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[facility kv-pairs &amp; {:keys [instance-id]}]</div>
            
            
            <div class="doc"><p>Set the settings for the specified host facility. The instance-id allows
the specification of specific instance of the facility (the default is
:default).</p>
</div>
          </div><div class="public">
            <h3><a id="var-content-options" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L228">content-options</a></h3>
            <h4 class="var-type var" id="var-type">var</h4>
            
            
            
            <div class="doc"><p>A vector of the options accepted by remote-file.  Can be used for
option forwarding when calling remote-file from other crates.</p>
</div>
          </div><div class="public">
            <h3><a id="var-delete-local-path" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L261">delete-local-path</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[local-path]</div>
            
            
            <div class="doc"><p>Function to delete a local path.</p>
</div>
          </div><div class="public">
            <h3><a id="var-directories" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L211">directories</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[paths &amp; options]</div>
            
            
            <div class="doc"><p>Directory management of multiple directories with the same
owner/group/permissions.</p>

<p><code>options</code> are as for <code>directory</code> and are applied to each directory in
<code>paths</code></p>
</div>
          </div><div class="public">
            <h3><a id="var-directory" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L194">directory</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[dir-path &amp; {:keys [action recursive force path mode verbose owner group], :or {action :create, recursive true, force true, path true}}]</div>
            
            
            <div class="doc"><p>Directory management.</p>

<p>For :create and :touch, all components of path are effected.</p>

<p>Options are:
 - :action     One of :create, :touch, :delete
 - :recursive  Flag for recursive delete
 - :force      Flag for forced delete
 - :path       flag to create all path elements
 - :owner      set owner
 - :group      set group
 - :mode       set mode</p>
</div>
          </div><div class="public">
            <h3><a id="var-exec" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L21">exec</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[{:keys [language interpreter version], :or {language :bash}} script]</div>
            
            
            <div class="doc"><p>Execute script on the target node. The <code>script</code> is a plain string. <code>type</code>
specifies the script language (default :bash). You can override the
interpreter path using the <code>:interpreter</code> option.</p>
</div>
          </div><div class="public">
            <h3><a id="var-exec-checked-script" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L38">exec-checked-script</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[script-name &amp; script]</div>
            
            
            <div class="doc"><p>Execute a bash script remotely, throwing if any element of the
script fails. The script is expressed in stevedore.</p>
</div>
          </div><div class="public">
            <h3><a id="var-exec-script" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L32">exec-script</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[&amp; script]</div>
            
            
            <div class="doc"><p>Execute a bash script remotely. The script is expressed in stevedore.</p>
</div>
          </div><div class="public">
            <h3><a id="var-exec-script*" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L28">exec-script*</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[script]</div>
            
            
            <div class="doc"><p>Execute script on the target node. The script is a plain string.</p>
</div>
          </div><div class="public">
            <h3><a id="var-fifo" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L174">fifo</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[path &amp; {:keys [action owner group mode force], :or {action :create}}]</div>
            
            
            <div class="doc"><p>FIFO pipe management.</p>

<ul>
<li>:action    one of :create, :delete</li>
<li>:owner     user name or id for owner of fifo</li>
<li>:group     user name or id for group of fifo</li>
<li>:mode      fifo permissions</li>
<li>:force     when deleting, try and force removal</li>
</ul>
</div>
          </div><div class="public">
            <h3><a id="var-file" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L152">file</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[path &amp; {:keys [action owner group mode force], :or {action :create, force true}}]</div>
            
            
            <div class="doc"><p>Touch or remove a file. Can also set owner and permissions.</p>

<ul>
<li>:action    one of :create, :delete, :touch</li>
<li>:owner     user name or id for owner of file</li>
<li>:group     user name or id for group of file</li>
<li>:mode      file permissions</li>
<li>:force     when deleting, try and force removal</li>
</ul>
</div>
          </div><div class="public">
            <h3><a id="var-group" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L560">group</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[groupname &amp; {:keys [action system gid password], :or {action :manage}, :as options}]</div>
            
            
            <div class="doc"><p>User Group Management.</p>

<p><code>:action</code>
: One of :create, :manage, :remove.</p>

<p><code>:gid</code>
: specify the group id</p>

<p><code>:password</code>
: An MD5 crypted password for the user.</p>

<p><code>:system</code>
: Specify the user as a system user.</p>
</div>
          </div><div class="public">
            <h3><a id="var-install-deb" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L532">install-deb</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[deb-name &amp; {:as options}]</div>
            
            
            <div class="doc"><p>Add a deb.  Source options are as for remote file.</p>
</div>
          </div><div class="public">
            <h3><a id="var-minimal-packages" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L536">minimal-packages</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[]</div>
            
            
            <div class="doc"><p>Add minimal packages for pallet to function</p>
</div>
          </div><div class="public">
            <h3><a id="var-on-one-node" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L702">on-one-node</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[roles &amp; body]</div>
            
            
            <div class="doc"><p>Execute the body on just one node of the specified roles. If there is no
node in the union of nodes for all the roles, the nodes for the first role
are used.</p>
</div>
          </div><div class="public">
            <h3><a id="var-ownership-options" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L241">ownership-options</a></h3>
            <h4 class="var-type var" id="var-type">var</h4>
            
            
            
            <div class="doc"><p>A vector of options for controlling ownership. Can be used for option
forwarding when calling remote-file from other crates.</p>
</div>
          </div><div class="public">
            <h3><a id="var-package" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L451">package</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[package-name &amp; {:keys [action y force purge enable disable priority], :or {action :install, y true, priority 50}}]</div>
            
            
            <div class="doc"><p>Install or remove a package.</p>

<p>Options
 - :action [:install | :remove | :upgrade]
 - :purge [true|false]         when removing, whether to remove all config
 - :enable [repo|(seq repo)]   enable specific repository
 - :disable [repo|(seq repo)]  disable specific repository
 - :priority n                 priority (0-100, default 50)</p>

<p>Package management occurs in one shot, so that the package manager can
maintain a consistent view.</p>
</div>
          </div><div class="public">
            <h3><a id="var-package-manager" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L481">package-manager</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[action &amp; options]</div>
            
            
            <div class="doc"><p>Package manager controls.</p>

<p><code>action</code> is one of the following:
- :update          - update the list of available packages
- :list-installed  - output a list of the installed packages
- :add-scope       - enable a scope (eg. multiverse, non-free)</p>

<p>To refresh the list of packages known to the pakage manager:
    (package-manager session :update)</p>

<p>To enable multiverse on ubuntu:
    (package-manager session :add-scope :scope :multiverse)</p>

<p>To enable non-free on debian:
    (package-manager session :add-scope :scope :non-free)</p>
</div>
          </div><div class="public">
            <h3><a id="var-package-source" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L503">package-source</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[name &amp; {:keys [aptitude yum]}]</div>
            
            
            <div class="doc"><p>Control package sources.
Options are the package manager keywords, each specifying a map of
packager specific options.</p>

<p>:aptitude
  - :source-type string   - source type (deb)
  - :url url              - repository url
  - :scopes seq           - scopes to enable for repository
  - :key-url url          - url for key
  - :key-id id            - id for key to look it up from keyserver</p>

<p>:yum
  - :name                 - repository name
  - :url url          - repository base url
  - :gpgkey url           - gpg key url for repository</p>

<p>Example
    (package-source "Partner"
      :aptitude {:url "http://archive.canonical.com/"
                 :scopes ["partner"]})</p>
</div>
          </div><div class="public">
            <h3><a id="var-packages" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L470">packages</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[&amp; {:keys [yum aptitude pacman brew], :as options}]</div>
            
            
            <div class="doc"><p>Install a list of packages keyed on packager.
(packages session
  :yum ["git" "git-email"]
  :aptitude ["git-core" "git-email"])</p>
</div>
          </div><div class="public">
            <h3><a id="var-plan-when" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L61">plan-when</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[condition &amp; crate-fns-or-actions]</div>
            
            
            <div class="doc"><p>Execute the crate-fns-or-actions, only when condition is true.</p>
</div>
          </div><div class="public">
            <h3><a id="var-plan-when-not" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L93">plan-when-not</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[condition &amp; crate-fns-or-actions]</div>
            
            
            <div class="doc"><p>Execute the crate-fns-or-actions, only when condition is false.</p>
</div>
          </div><div class="public">
            <h3><a id="var-remote-directory" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L390">remote-directory</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[path &amp; {:keys [action url local-file remote-file unpack tar-options unzip-options jar-options strip-components md5 md5-url owner group recursive force-overwrite local-file-options], :or {action :create, tar-options "xz", unzip-options "-o", jar-options "xf", strip-components 1, recursive true}, :as options}]</div>
            
            
            <div class="doc"><p>Specify the contents of remote directory.</p>

<p>Options:
 - :url              - a url to download content from
 - :unpack           - how download should be extracts (default :tar)
 - :tar-options      - options to pass to tar (default "xz")
 - :unzip-options    - options to pass to unzip (default "-o")
 - :jar-options      - options to pass to unzip (default "xf")
                       jar does not support stripping path components
 - :strip-components - number of path compnents to remove when unpacking
 - :md5              - md5 of file to unpack
 - :md5-url          - url of md5 file for file to unpack</p>

<p>Ownership options:
 - :owner            - owner of files
 - :group            - group of files
 - :recursive        - flag to recursively set owner and group</p>

<p>To install the content of an url pointing at a tar file, specify the :url
option.
    (remote-directory session path
       :url "http://a.com/path/file.tgz")</p>

<p>If there is an md5 url with the tar file's md5, you can specify that as well,
to prevent unecessary downloads and verify the content.
    (remote-directory session path
       :url "http://a.com/path/file.tgz"
       :md5-url "http://a.com/path/file.md5")</p>

<p>To install the content of an url pointing at a zip file, specify the :url
option and :unpack :unzip.
    (remote-directory session path
       :url "http://a.com/path/file."
       :unpack :unzip)</p>
</div>
          </div><div class="public">
            <h3><a id="var-remote-file" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L276">remote-file</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[path &amp; {:keys [action url local-file remote-file link content literal template values md5 md5-url owner group mode force blob blobstore install-new-files overwrite-changes no-versioning max-versions flag-on-changed local-file-options], :as options}]</div>
            
            
            <div class="doc"><p>Remote file content management.</p>

<p>The <code>remote-file</code> action can specify the content of a remote file in a number
different ways.</p>

<p>By default, the remote-file is versioned, and 5 versions are kept.</p>

<p>The remote content is also verified against it's md5 hash.  If the contents
of the remote file have changed (e.g. have been edited on the remote machine)
then by default the file will not be overwritten, and an error will be raised.
To force overwrite, call <code>set-force-overwrite</code> before running <code>converge</code> or
<code>lift</code>.</p>

<p>Options for specifying the file's content are:
  :url url          - download the specified url to the given filepath
  :content string   - use the specified content directly
  :local-file path  - use the file on the local machine at the given path
  :remote-file path - use the file on the remote machine at the given path
  :link             - file to link to
  :literal          - prevent shell expansion on content
  :md5              - md5 for file
  :md5-url          - a url containing file's md5
  :template         - specify a template to be interpolated
  :values           - values for interpolation
  :blob             - map of :container, :path
  :blobstore        - a jclouds blobstore object (override blobstore in session)
  :insecure         - boolean to specify ignoring of SLL certs</p>

<p>Options for version control are:
  :overwrite-changes - flag to force overwriting of locally modified content
  :no-versioning    - do not version the file
  :max-versions     - specfy the number of versions to keep (default 5)
  :flag-on-changed  - flag to set if file is changed</p>

<p>Options for specifying the file's permissions are:
  :owner user-name
  :group group-name
  :mode  file-mode</p>

<p>To copy the content of a local file to a remote file:
    (remote-file session "remote/path" :local-file "local/path")</p>

<p>To copy the content of one remote file to another remote file:
    (remote-file session "remote/path" :remote-file "remote/source/path")</p>

<p>To link one remote file to another remote file:
    (remote-file session "remote/path" :link "remote/source/path")</p>

<p>To download a url to a remote file:
    (remote-file session "remote/path" :url "http://a.com/path")</p>

<p>If a url to a md5 file is also available, then it can be specified to prevent
unnecessary downloads and to verify the download.
    (remote-file session "remote/path"
      :url "http://a.com/path"
      :md5-url "http://a.com/path.md5")</p>

<p>If the md5 of the file to download, it can be specified to prevent unnecessary
downloads and to verify the download.
    (remote-file session "remote/path"
      :url "http://a.com/path"
      :md5 "6de9439834c9147569741d3c9c9fc010")</p>

<p>Content can also be copied from a blobstore.
    (remote-file session "remote/path"
      :blob {:container "container" :path "blob"})</p>
</div>
          </div><div class="public">
            <h3><a id="var-remote-file-content" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L379">remote-file-content</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[path]</div>
            
            
            <div class="doc"><p>Return a function that returns the content of a file, when used inside
another action.</p>
</div>
          </div><div class="public">
            <h3><a id="var-retry-until" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L680">retry-until</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[{:keys [max-retries standoff service-name], :or {max-retries 5, standoff 2}} condition]</div>
            
            
            <div class="doc"><p>Repeat an action until it succeeds</p>
</div>
          </div><div class="public">
            <h3><a id="var-return-value-expr" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L127">return-value-expr</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[[&amp; return-values] &amp; body]</div>
            
            
            <div class="doc"><p>Creates an action that can transform return values</p>
</div>
          </div><div class="public">
            <h3><a id="var-rsync" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L543">rsync</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[local-path remote-path {:keys [port]}]</div>
            
            
            <div class="doc"><p>Use rsync to copy files from local-path to remote-path</p>
</div>
          </div><div class="public">
            <h3><a id="var-rsync-directory" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L547">rsync-directory</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[from to &amp; {:keys [owner group mode port], :as options}]</div>
            
            
            <div class="doc"><p>Rsync from a local directory to a remote directory.</p>
</div>
          </div><div class="public">
            <h3><a id="var-sed" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L185">sed</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[path exprs-map &amp; {:keys [separator no-md5 restriction]}]</div>
            
            
            <div class="doc"><p>Execute sed on the file at path.  Takes a map of expr to replacement.
- :separator     the separator to use in generated sed expressions. This
                 will be inferred if not specified.
- :no-md5        prevent md5 generation for the modified file
- :restriction   restrict the sed expressions to a particular context.</p>
</div>
          </div><div class="public">
            <h3><a id="var-service" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L621">service</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[service-name &amp; {:keys [action if-flag if-stopped service-impl], :or {action :start, service-impl :initd}, :as options}]</div>
            
            
            <div class="doc"><p>Control services.</p>

<ul>
<li>:action  accepts either startstop, restart, enable or disable keywords.</li>
<li>:if-flag  makes start, stop, and restart confitional on the specified flag
        as set, for example, by remote-file :flag-on-changed</li>
<li>:sequence-start  a sequence of [sequence-number level level ...], where
               sequence number determines the order in which services
               are started within a level.</li>
<li>:service-impl    either :initd or :upstart</li>
</ul>
</div>
          </div><div class="public">
            <h3><a id="var-service-script" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L644">service-script</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[service-name &amp; {:keys [action url local-file remote-file link content literal template values md5 md5-url force service-impl], :or {action :create, service-impl :initd}, :as options}]</div>
            
            
            <div class="doc"><p>Install a service script.  Sources as for remote-file.</p>
</div>
          </div><div class="public">
            <h3><a id="var-set-force-overwrite" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L270">set-force-overwrite</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[flag]</div>
            
            
            <div class="doc"><p>Globally force installation of new files, even if content on node has
changed.</p>
</div>
          </div><div class="public">
            <h3><a id="var-set-install-new-files" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L265">set-install-new-files</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[flag]</div>
            
            
            <div class="doc"><p>Set boolean flag to control installation of new files</p>
</div>
          </div><div class="public">
            <h3><a id="var-symbolic-link" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L163">symbolic-link</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[from name &amp; {:keys [action owner group mode force], :or {action :create, force true}}]</div>
            
            
            <div class="doc"><p>Symbolic link management.</p>

<ul>
<li>:action    one of :create, :delete</li>
<li>:owner     user name or id for owner of symlink</li>
<li>:group     user name or id for group of symlink</li>
<li>:mode      symlink permissions</li>
<li>:force     when deleting, try and force removal</li>
</ul>
</div>
          </div><div class="public">
            <h3><a id="var-transfer-file" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L253">transfer-file</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[local-path remote-path]</div>
            
            
            <div class="doc"><p>Function to transfer a local file to a remote path.</p>
</div>
          </div><div class="public">
            <h3><a id="var-transfer-file-to-local" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L257">transfer-file-to-local</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[remote-path local-path]</div>
            
            
            <div class="doc"><p>Function to transfer a remote file to a local path.</p>
</div>
          </div><div class="public">
            <h3><a id="var-update-settings" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L144">update-settings</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[facility options-or-f &amp; args]</div>
            
            
            <div class="doc"><p>Update the settings for the specified host facility. The instance-id allows
the specification of specific instance of the facility (the default is
:default).</p>
</div>
          </div><div class="public">
            <h3><a id="var-user" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L578">user</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[username &amp; {:keys [action shell base-dir home system create-home password shell comment group groups remove force append], :or {action :manage}, :as options}]</div>
            
            
            <div class="doc"><p>User management.</p>

<p><code>:action</code>
: One of :create, :manage, :lock, :unlock or :remove.</p>

<p><code>:shell</code>
: One of :bash, :csh, :ksh, :rsh, :sh, :tcsh, :zsh, :false or a path string.</p>

<p><code>:create-home</code>
: Controls creation of the user's home directory.</p>

<p><code>:base-dir</code>
: The directory in which default user directories should be created.</p>

<p><code>:home</code>
: Specify the user's home directory.</p>

<p><code>:system</code>
: Specify the user as a system user.</p>

<p><code>:comment</code>
: A comment to record for the user.</p>

<p><code>:group</code>
: The user's login group. Defaults to a group with the same name as the user.</p>

<p><code>:groups</code>
: Additional groups the user should belong to.</p>

<p><code>:password</code>
: An MD5 crypted password for the user.</p>

<p><code>:force</code>
: Force user removal.</p>
</div>
          </div><div class="public">
            <h3><a id="var-version-options" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L235">version-options</a></h3>
            <h4 class="var-type var" id="var-type">var</h4>
            
            
            
            <div class="doc"><p>A vector of options for controlling versions. Can be used for option
forwarding when calling remote-file from other crates.</p>
</div>
          </div><div class="public">
            <h3><a id="var-with-remote-file" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L366">with-remote-file</a></h3>
            <h4 class="var-type fn" id="var-type">fn</h4>
            <div class="usage">[f path &amp; args]</div>
            
            
            <div class="doc"><p>Function to call f with a local copy of the sessioned remote path.
f should be a function taking [session local-path &amp; _], where local-path will
be a File with a copy of the remote file (which will be unlinked after
calling f.</p>
</div>
          </div><div class="public">
            <h3><a id="var-with-service-restart" class="source var-name" href="https://github.com/pallet/pallet/blob/develop/src/pallet/actions.clj#L635">with-service-restart</a></h3>
            <h4 class="var-type macro" id="var-type">macro</h4>
            <div class="usage">[service-name &amp; body]</div>
            
            
            <div class="doc"><p>Stop the given service, execute the body, and then restart.</p>
</div>
          </div>
        </div>
      </div>
    </article>
  </body>

</html>